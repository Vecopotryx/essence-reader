var Ps=Object.defineProperty;var Ms=(t,e,n)=>e in t?Ps(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qt=(t,e,n)=>(Ms(t,typeof e!="symbol"?e+"":e,n),n);var Zl=Rs((Jl,Cs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function z(){}const Mn=t=>t;function Z(t,e){for(const n in e)t[n]=e[n];return t}function Pi(t){return t()}function Fr(){return Object.create(null)}function ve(t){t.forEach(Pi)}function Xe(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Jt;function Lr(t,e){return Jt||(Jt=document.createElement("a")),Jt.href=e,t===Jt.href}function Ts(t){return Object.keys(t).length===0}function Is(t,...e){if(t==null){for(const r of e)r(void 0);return z}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ds(t,e,n){t.$$.on_destroy.push(Is(e,n))}function Et(t,e,n,r){if(t){const i=Mi(t,e,n,r);return t[0](i)}}function Mi(t,e,n,r){return t[1]&&r?Z(n.ctx.slice(),t[1](r(e))):n.ctx}function At(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function St(t,e,n,r,i,o){if(i){const s=Mi(e,n,r,o);t.p(s,i)}}function Bt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function me(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function pe(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function js(t){return t&&Xe(t.destroy)?t.destroy:z}function qr(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Ri=typeof window<"u";let kr=Ri?()=>window.performance.now():()=>Date.now(),xr=Ri?t=>requestAnimationFrame(t):z;const ot=new Set;function Ti(t){ot.forEach(e=>{e.c(t)||(ot.delete(e),e.f())}),ot.size!==0&&xr(Ti)}function Er(t){let e;return ot.size===0&&xr(Ti),{promise:new Promise(n=>{ot.add(e={c:t,f:n})}),abort(){ot.delete(e)}}}const Ks=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S(t,e){t.appendChild(e)}function Ii(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function zs(t){const e=R("style");return e.textContent="/* empty */",Ns(Ii(t),e),e.sheet}function Ns(t,e){return S(t.head||t,e),e.sheet}function P(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function Fs(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function R(t){return document.createElement(t)}function W(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t){return document.createTextNode(t)}function F(){return H(" ")}function Ar(){return H("")}function X(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function M(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ge(t,e){for(const n in e)M(t,n,e[n])}function Ls(t){return t===""?null:+t}function qs(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function De(t,e){t.value=e??""}function ie(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ur(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Us(t){const e=t.querySelector(":checked");return e&&e.__value}function Hs(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const pn=new Map;let gn=0;function Vs(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ys(t,e){const n={stylesheet:zs(e),rules:{}};return pn.set(t,n),n}function yn(t,e,n,r,i,o,s,a=0){const l=16.666/r;let c=`{
`;for(let m=0;m<=1;m+=l){const y=e+(n-e)*o(m);c+=m*100+`%{${s(y,1-y)}}
`}const u=c+`100% {${s(n,1-n)}}
}`,f=`__svelte_${Vs(u)}_${a}`,h=Ii(t),{stylesheet:p,rules:g}=pn.get(h)||Ys(h,t);g[f]||(g[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${i}ms 1 both`,gn+=1,f}function bn(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),gn-=i,gn||Ws())}function Ws(){xr(()=>{gn||(pn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&C(e)}),pn.clear())})}function Gs(t,e,n,r){if(!e)return z;const i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return z;const{delay:o=0,duration:s=300,easing:a=Mn,start:l=kr()+o,end:c=l+s,tick:u=z,css:f}=n(t,{from:e,to:i},r);let h=!0,p=!1,g;function d(){f&&(g=yn(t,0,1,s,o,a,f)),o||(p=!0)}function m(){f&&bn(t,g),h=!1}return Er(y=>{if(!p&&y>=l&&(p=!0),p&&y>=c&&(u(1,0),m()),!h)return!1;if(p){const b=y-l,_=0+1*a(b/s);u(_,1-_)}return!0}),d(),u(0,1),m}function Zs(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,Qs(t,i)}}function Qs(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let zt;function Ot(t){zt=t}function Js(){if(!zt)throw new Error("Function called outside component initialization");return zt}function Sr(t){Js().$$.on_mount.push(t)}const it=[],Ne=[];let at=[];const Wn=[],Di=Promise.resolve();let Gn=!1;function ji(){Gn||(Gn=!0,Di.then(Ki))}function Xs(){return ji(),Di}function be(t){at.push(t)}function _n(t){Wn.push(t)}const jn=new Set;let tt=0;function Ki(){if(tt!==0)return;const t=zt;do{try{for(;tt<it.length;){const e=it[tt];tt++,Ot(e),$s(e.$$)}}catch(e){throw it.length=0,tt=0,e}for(Ot(null),it.length=0,tt=0;Ne.length;)Ne.pop()();for(let e=0;e<at.length;e+=1){const n=at[e];jn.has(n)||(jn.add(n),n())}at.length=0}while(it.length);for(;Wn.length;)Wn.pop()();Gn=!1,jn.clear(),Ot(t)}function $s(t){if(t.fragment!==null){t.update(),ve(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(be)}}function eo(t){const e=[],n=[];at.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),at=e}let vt;function zi(){return vt||(vt=Promise.resolve(),vt.then(()=>{vt=null})),vt}function Ct(t,e,n){t.dispatchEvent(Hs(`${e?"intro":"outro"}${n}`))}const on=new Set;let Ce;function pt(){Ce={r:0,c:[],p:Ce}}function gt(){Ce.r||ve(Ce.c),Ce=Ce.p}function K(t,e){t&&t.i&&(on.delete(t),t.i(e))}function N(t,e,n,r){if(t&&t.o){if(on.has(t))return;on.add(t),Ce.c.push(()=>{on.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Ni={duration:0};function Rn(t,e,n){const r={direction:"in"};let i=e(t,n,r),o=!1,s,a,l=0;function c(){s&&bn(t,s)}function u(){const{delay:h=0,duration:p=300,easing:g=Mn,tick:d=z,css:m}=i||Ni;m&&(s=yn(t,0,1,p,h,g,m,l++)),d(0,1);const y=kr()+h,b=y+p;a&&a.abort(),o=!0,be(()=>Ct(t,!0,"start")),a=Er(_=>{if(o){if(_>=b)return d(1,0),Ct(t,!0,"end"),c(),o=!1;if(_>=y){const E=g((_-y)/p);d(E,1-E)}}return o})}let f=!1;return{start(){f||(f=!0,bn(t),Xe(i)?(i=i(r),zi().then(u)):u())},invalidate(){f=!1},end(){o&&(c(),o=!1)}}}function vn(t,e,n,r){let o=e(t,n,{direction:"both"}),s=r?0:1,a=null,l=null,c=null,u;function f(){c&&bn(t,c)}function h(g,d){const m=g.b-s;return d*=Math.abs(m),{a:s,b:g.b,d:m,duration:d,start:g.start,end:g.start+d,group:g.group}}function p(g){const{delay:d=0,duration:m=300,easing:y=Mn,tick:b=z,css:_}=o||Ni,E={start:kr()+d,b:g};g||(E.group=Ce,Ce.r+=1),"inert"in t&&(g?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),a||l?l=E:(_&&(f(),c=yn(t,s,g,m,d,y,_)),g&&b(0,1),a=h(E,m),be(()=>Ct(t,g,"start")),Er(w=>{if(l&&w>l.start&&(a=h(l,m),l=null,Ct(t,a.b,"start"),_&&(f(),c=yn(t,s,a.b,a.duration,0,y,o.css))),a){if(w>=a.end)b(s=a.b,1-s),Ct(t,a.b,"end"),l||(a.b?f():--a.group.r||ve(a.group.c)),a=null;else if(w>=a.start){const x=w-a.start;s=a.a+a.d*y(x/a.duration),b(s,1-s)}}return!!(a||l)}))}return{run(g){Xe(o)?zi().then(()=>{o=o({direction:g?"in":"out"}),p(g)}):p(g)},end(){f(),a=l=null}}}function wn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function to(t,e){N(t,1,1,()=>{e.delete(t.key)})}function no(t,e){t.f(),to(t,e)}function ro(t,e,n,r,i,o,s,a,l,c,u,f){let h=t.length,p=o.length,g=h;const d={};for(;g--;)d[t[g].key]=g;const m=[],y=new Map,b=new Map,_=[];for(g=p;g--;){const k=f(i,o,g),B=n(k);let v=s.get(B);v?r&&_.push(()=>v.p(k,e)):(v=c(B,k),v.c()),y.set(B,m[g]=v),B in d&&b.set(B,Math.abs(g-d[B]))}const E=new Set,w=new Set;function x(k){K(k,1),k.m(a,u),s.set(k.key,k),u=k.first,p--}for(;h&&p;){const k=m[p-1],B=t[h-1],v=k.key,T=B.key;k===B?(u=k.first,h--,p--):y.has(T)?!s.has(v)||E.has(v)?x(k):w.has(T)?h--:b.get(v)>b.get(T)?(w.add(v),x(k)):(E.add(T),h--):(l(B,s),h--)}for(;h--;){const k=t[h];y.has(k.key)||l(k,s)}for(;p;)x(m[p-1]);return ve(_),m}function $e(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function kn(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function $(t){t&&t.c()}function Q(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),be(()=>{const o=t.$$.on_mount.map(Pi).filter(Xe);t.$$.on_destroy?t.$$.on_destroy.push(...o):ve(o),t.$$.on_mount=[]}),i.forEach(be)}function J(t,e){const n=t.$$;n.fragment!==null&&(eo(n.after_update),ve(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function io(t,e){t.$$.dirty[0]===-1&&(it.push(t),ji(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ce(t,e,n,r,i,o,s,a=[-1]){const l=zt;Ot(t);const c=t.$$={fragment:null,ctx:[],props:o,update:z,not_equal:i,bound:Fr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Fr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...p)=>{const g=p.length?p[0]:h;return c.ctx&&i(c.ctx[f],c.ctx[f]=g)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](g),u&&io(t,f)),h}):[],c.update(),u=!0,ve(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=qs(e.target);c.fragment&&c.fragment.l(f),f.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&K(t.$$.fragment),Q(t,e.target,e.anchor),Ki()}Ot(l)}class ue{constructor(){Qt(this,"$$");Qt(this,"$$set")}$destroy(){J(this,1),this.$destroy=z}$on(e,n){if(!Xe(n))return z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Ts(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const so="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(so);const V=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ee=Object.keys,ae=Array.isArray;function he(t,e){return typeof e!="object"||ee(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||V.Promise||(V.Promise=Promise);const Nt=Object.getPrototypeOf,oo={}.hasOwnProperty;function _e(t,e){return oo.call(t,e)}function dt(t,e){typeof e=="function"&&(e=e(Nt(t))),(typeof Reflect>"u"?ee:Reflect.ownKeys)(e).forEach(n=>{Me(t,n,e[n])})}const Fi=Object.defineProperty;function Me(t,e,n,r){Fi(t,e,he(n&&_e(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function lt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Me(t.prototype,"constructor",t),{extend:dt.bind(null,t.prototype)}}}}const ao=Object.getOwnPropertyDescriptor;function Br(t,e){let n;return ao(t,e)||(n=Nt(t))&&Br(n,e)}const lo=[].slice;function xn(t,e,n){return lo.call(t,e,n)}function Li(t,e){return e(t)}function kt(t){if(!t)throw new Error("Assertion Failed")}function qi(t){V.setImmediate?setImmediate(t):setTimeout(t,0)}function Ui(t,e){return t.reduce((n,r,i)=>{var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Re(t,e){if(_e(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=Re(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var a=t[e.substr(0,s)];return a===void 0?void 0:Re(a,e.substr(s+1))}}function ke(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){kt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)ke(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),a=e.substr(o+1);if(a==="")n===void 0?ae(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var l=t[s];l&&_e(t,s)||(l=t[s]={}),ke(l,a,n)}}else n===void 0?ae(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Hi(t){var e={};for(var n in t)_e(t,n)&&(e[n]=t[n]);return e}const co=[].concat;function Vi(t){return co.apply([],t)}const Yi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vi([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>V[t]),uo=Yi.map(t=>V[t]);Ui(Yi,t=>[t,!0]);let Ke=null;function Wt(t){Ke=typeof WeakMap<"u"&&new WeakMap;const e=Zn(t);return Ke=null,e}function Zn(t){if(!t||typeof t!="object")return t;let e=Ke&&Ke.get(t);if(e)return e;if(ae(t)){e=[],Ke&&Ke.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Zn(t[n]))}else if(uo.indexOf(t.constructor)>=0)e=t;else{const o=Nt(t);for(var i in e=o===Object.prototype?{}:Object.create(o),Ke&&Ke.set(t,e),t)_e(t,i)&&(e[i]=Zn(t[i]))}return e}const{toString:fo}={};function Qn(t){return fo.call(t).slice(8,-1)}const Jn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ho=typeof Jn=="symbol"?function(t){var e;return t!=null&&(e=t[Jn])&&e.apply(t)}:function(){return null},st={};function Oe(t){var e,n,r,i;if(arguments.length===1){if(ae(t))return t.slice();if(this===st&&typeof t=="string")return[t];if(i=ho(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Or=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Ae=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wi(t,e){Ae=t,Gi=e}var Gi=()=>!0;const mo=!new Error("").stack;function et(){if(mo)try{throw et.arguments,new Error}catch(t){return t}return new Error}function Xn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Gi).map(r=>`
`+r).join("")):""}var Zi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Cr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zi),po={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ct(t,e){this._e=et(),this.name=t,this.message=e}function Qi(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function En(t,e,n,r){this._e=et(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Qi(t,e)}function Pt(t,e){this._e=et(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Qi(t,e)}lt(ct).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Xn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),lt(En).from(ct),lt(Pt).from(ct);var Pr=Cr.reduce((t,e)=>(t[e]=e+"Error",t),{});const go=ct;var j=Cr.reduce((t,e)=>{var n=e+"Error";function r(i,o){this._e=et(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=po[e]||n,this.inner=null)}return lt(r).from(go),t[e]=r,t},{});j.Syntax=SyntaxError,j.Type=TypeError,j.Range=RangeError;var Hr=Zi.reduce((t,e)=>(t[e+"Error"]=j[e],t),{}),an=Cr.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=j[e]),t),{});function U(){}function Ft(t){return t}function yo(t,e){return t==null||t===Ft?e:function(n){return e(t(n))}}function Qe(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function bo(t,e){return t===U?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Qe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Qe(i,this.onerror):i),o!==void 0?o:n}}function _o(t,e){return t===U?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Qe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Qe(r,this.onerror):r)}}function vo(t,e){return t===U?e:function(n){var r=t.apply(this,arguments);he(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Qe(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Qe(o,this.onerror):o),r===void 0?s===void 0?void 0:s:he(r,s)}}function wo(t,e){return t===U?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Mr(t,e){return t===U?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}an.ModifyError=En,an.DexieError=ct,an.BulkError=Pt;var Lt={};const Ji=100,[$n,An,er]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Nt(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Nt(e),t]})(),Xi=An&&An.then,ln=$n&&$n.constructor,Rr=!!er;var tr=!1,ko=er?()=>{er.then(Xt)}:V.setImmediate?setImmediate.bind(null,Xt):V.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Xt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Xt,0)},Mt=function(t,e){xt.push([t,e]),Sn&&(ko(),Sn=!1)},nr=!0,Sn=!0,We=[],cn=[],rr=null,ir=Ft,ut={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Wr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Wr(t[0],t[1])}catch{}})}},I=ut,xt=[],Ge=0,un=[];function O(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=U,this._lib=!1;var e=this._PSD=I;if(Ae&&(this._stackHolder=et(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Lt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&or(this,this._value))}this._state=null,this._value=null,++e.ref,es(this,t)}const sr={get:function(){var t=I,e=Bn;function n(r,i){var o=!t.global&&(t!==I||e!==Bn);const s=o&&!Te();var a=new O((l,c)=>{Tr(this,new $i(On(r,t,o,s),On(i,t,o,s),l,c,t))});return Ae&&rs(a,this),a}return n.prototype=Lt,n},set:function(t){Me(this,"then",t&&t.prototype===Lt?sr:{get:function(){return t},set:sr.set})}};function $i(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function es(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Gt();n&&typeof n.then=="function"?es(t,(i,o)=>{n instanceof O?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,ts(t)),r&&Zt()}},or.bind(null,t))}catch(n){or(t,n)}}function or(t,e){if(cn.push(e),t._state===null){var n=t._lib&&Gt();e=ir(e),t._state=!1,t._value=e,Ae&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,o){try{r.apply(null,o)}catch(s){i&&i(s)}}(()=>{var r=Br(e,"stack");e._promise=t,Me(e,"stack",{get:()=>tr?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){We.some(i=>i._value===r._value)||We.push(r)}(t),ts(t),n&&Zt()}}function ts(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Tr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ge===0&&(++Ge,Mt(()=>{--Ge==0&&Ir()},[]))}function Tr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ge,Mt(xo,[n,t,e])}else t._listeners.push(e)}function xo(t,e,n){try{rr=e;var r,i=e._value;e._state?r=t(i):(cn.length&&(cn=[]),r=t(i),cn.indexOf(i)===-1&&function(o){for(var s=We.length;s;)if(We[--s]._value===o._value)return void We.splice(s,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{rr=null,--Ge==0&&Ir(),--n.psd.ref||n.psd.finalize()}}function ns(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,o,s=t._value;s!=null?(i=s.name||"Error",o=s.message||s,r=Xn(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return Ae&&((r=Xn(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&ns(t._prev,e,n)),e}function rs(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Xt(){Gt()&&Zt()}function Gt(){var t=nr;return nr=!1,Sn=!1,t}function Zt(){var t,e,n;do for(;xt.length>0;)for(t=xt,xt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(xt.length>0);nr=!0,Sn=!0}function Ir(){var t=We;We=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=un.slice(0),n=e.length;n;)e[--n]()}function $t(t){return new O(Lt,!1,t)}function Y(t,e){var n=I;return function(){var r=Gt(),i=I;try{return Le(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Le(i,!1),r&&Zt()}}}dt(O.prototype,{then:sr,_then:function(t,e){Tr(this,new $i(null,null,t,e,I))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):$t(r)):this.then(null,r=>r&&r.name===e?n(r):$t(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),$t(e)))},stack:{get:function(){if(this._stack)return this._stack;try{tr=!0;var t=ns(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{tr=!1}}},timeout:function(t,e){return t<1/0?new O((n,r)=>{var i=setTimeout(()=>r(new j.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Me(O.prototype,Symbol.toStringTag,"Dexie.Promise"),ut.env=is(),dt(O,{all:function(){var t=Oe.apply(null,arguments).map(en);return new O(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,o)=>O.resolve(i).then(s=>{t[o]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof O)return t;if(t&&typeof t.then=="function")return new O((n,r)=>{t.then(n,r)});var e=new O(Lt,!0,t);return rs(e,rr),e},reject:$t,race:function(){var t=Oe.apply(null,arguments).map(en);return new O((e,n)=>{t.map(r=>O.resolve(r).then(e,n))})},PSD:{get:()=>I,set:t=>I=t},totalEchoes:{get:()=>Bn},newPSD:Fe,usePSD:bt,scheduler:{get:()=>Mt,set:t=>{Mt=t}},rejectionMapper:{get:()=>ir,set:t=>{ir=t}},follow:(t,e)=>new O((n,r)=>Fe((i,o)=>{var s=I;s.unhandleds=[],s.onunhandled=o,s.finalize=Qe(function(){(function(a){function l(){a(),un.splice(un.indexOf(l),1)}un.push(l),++Ge,Mt(()=>{--Ge==0&&Ir()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),ln&&(ln.allSettled&&Me(O,"allSettled",function(){const t=Oe.apply(null,arguments).map(en);return new O(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,o)=>O.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),ln.any&&typeof AggregateError<"u"&&Me(O,"any",function(){const t=Oe.apply(null,arguments).map(en);return new O((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((o,s)=>O.resolve(o).then(a=>e(a),a=>{i[s]=a,--r||n(new AggregateError(i))}))})}));const oe={awaits:0,echoes:0,id:0};var Eo=0,fn=[],Kn=0,Bn=0,Ao=0;function Fe(t,e,n,r){var i=I,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Ao;var s=ut.env;o.env=Rr?{Promise:O,PromiseProp:{value:O,configurable:!0,writable:!0},all:O.all,race:O.race,allSettled:O.allSettled,any:O.any,resolve:O.resolve,reject:O.reject,nthen:Vr(s.nthen,o),gthen:Vr(s.gthen,o)}:{},e&&he(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=bt(o,t,n,r);return o.ref===0&&o.finalize(),a}function yt(){return oe.id||(oe.id=++Eo),++oe.awaits,oe.echoes+=Ji,oe.id}function Te(){return!!oe.awaits&&(--oe.awaits==0&&(oe.id=0),oe.echoes=oe.awaits*Ji,!0)}function en(t){return oe.echoes&&t&&t.constructor===ln?(yt(),t.then(e=>(Te(),e),e=>(Te(),re(e)))):t}function So(t){++Bn,oe.echoes&&--oe.echoes!=0||(oe.echoes=oe.id=0),fn.push(I),Le(t,!0)}function Bo(){var t=fn[fn.length-1];fn.pop(),Le(t,!1)}function Le(t,e){var n=I;if((e?!oe.echoes||Kn++&&t===I:!Kn||--Kn&&t===I)||ss(e?So.bind(null,t):Bo),t!==I&&(I=t,n===ut&&(ut.env=is()),Rr)){var r=ut.env.Promise,i=t.env;An.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(V,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function is(){var t=V.Promise;return Rr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(V,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:An.then,gthen:t.prototype.then}:{}}function bt(t,e,n,r,i){var o=I;try{return Le(t,!0),e(n,r,i)}finally{Le(o,!1)}}function ss(t){Xi.call($n,t)}function On(t,e,n,r){return typeof t!="function"?t:function(){var i=I;n&&yt(),Le(e,!0);try{return t.apply(this,arguments)}finally{Le(i,!1),r&&ss(Te)}}}function Vr(t,e){return function(n,r){return t.call(this,On(n,e),On(r,e))}}(""+Xi).indexOf("[native code]")===-1&&(yt=Te=U);const Yr="unhandledrejection";function Wr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(V.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Yr,!0,!0),he(r,i)):V.CustomEvent&&he(r=new CustomEvent(Yr,{detail:i}),i),r&&V.dispatchEvent&&(dispatchEvent(r),!V.PromiseRejectionEvent&&V.onunhandledrejection))try{V.onunhandledrejection(r)}catch{}Ae&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var re=O.reject;function ar(t,e,n,r){if(t.idbdb&&(t._state.openComplete||I.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===Pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ar(t,e,n,r))):re(o)}return i._promise(e,(o,s)=>Fe(()=>(I.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(t._state.openComplete)return re(new j.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return re(new j.DatabaseClosed);t.open().catch(U)}return t._state.dbReadyPromise.then(()=>ar(t,e,n,r))}const Gr="3.2.4",Ve=String.fromCharCode(65535),lr=-1/0,Se="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",os="String expected.",Rt=[],Tn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Oo=Tn,Co=Tn,as=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),In="__dbnames",zn="readonly",Nn="readwrite";function Je(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const ls={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Wt(e))[t],e)}class Po{_trans(e,n,r){const i=this._tx||I.trans,o=this.name;function s(l,c,u){if(!u.schema[o])throw new j.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}const a=Gt();try{return i&&i.db===this.db?i===I.trans?i._promise(e,s,r):Fe(()=>i._promise(e,s,r),{trans:i,transless:I.transless||I}):ar(this.db,e,[this.name],s)}finally{a&&Zt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ae(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ee(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==Ve)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Ae&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(c,u){try{return o.cmp(c,u)===0}catch{return!1}}const[a,l]=n.reduce(([c,u],f)=>{const h=i[f],p=e[f];return[c||h,c||!h?Je(u,h&&h.multi?g=>{const d=Re(g,f);return ae(d)&&d.some(m=>s(p,m))}:g=>s(p,Re(g,f))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ae(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var o in r)if(_e(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){he(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=tn(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?O.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{ke(e,i,s)}catch{}return s})}update(e,n){if(typeof e!="object"||ae(e))return this.where(":id").equals(e).modify(n);{const r=Re(e,this.schema.primKey.keyPath);if(r===void 0)return re(new j.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ee(n).forEach(i=>{ke(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=tn(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?O.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{ke(e,i,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?O.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:ls})).then(e=>e.numFailures?O.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new j.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(tn(l)):e;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:f,results:h,lastResult:p,failures:g})=>{if(f===0)return o?h:p;throw new Pt(`${this.name}.bulkAdd(): ${f} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new j.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(tn(l)):e;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:f,results:h,lastResult:p,failures:g})=>{if(f===0)return o?h:p;throw new Pt(`${this.name}.bulkPut(): ${f} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new Pt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function Tt(t){var e={},n=function(s,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,a,l){if(typeof s!="object"){var c;a||(a=wo),l||(l=U);var u={subscribers:[],fire:l,subscribe:function(f){u.subscribers.indexOf(f)===-1&&(u.subscribers.push(f),u.fire=a(u.fire,f))},unsubscribe:function(f){u.subscribers=u.subscribers.filter(function(h){return h!==f}),u.fire=u.subscribers.reduce(a,l)}};return e[s]=n[s]=u,u}ee(c=s).forEach(function(f){var h=c[f];if(ae(h))o(f,c[f][0],c[f][1]);else{if(h!=="asap")throw new j.InvalidArgument("Invalid event config");var p=o(f,Ft,function(){for(var g=arguments.length,d=new Array(g);g--;)d[g]=arguments[g];p.subscribers.forEach(function(m){qi(function(){m.apply(null,d)})})})}})}}function wt(t,e){return lt(e).from({prototype:t}),e}function nt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Fn(t,e){t.filter=Je(t.filter,e)}function Ln(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Je(r(),e()):e,t.justLimit=n&&!r}function dn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new j.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Zr(t,e,n){const r=dn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function nn(t,e,n,r){const i=t.replayFilter?Je(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},s=(a,l,c)=>{if(!i||i(l,c,h=>l.stop(h),h=>l.fail(h))){var u=l.primaryKey,f=""+u;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(u)),_e(o,f)||(o[f]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(s,n),Qr(Zr(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Qr(Zr(t,r,n),Je(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Qr(t,e,n,r){var i=Y(r?(o,s,a)=>n(r(o),s,a):n);return t.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();e&&!e(o,a=>s=a,a=>{o.stop(a),s=U},a=>{o.fail(a),s=U})||i(o.value,o,a=>s=a),s()})})}function de(t,e){try{const n=Jr(t),r=Jr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,o){const s=i.length,a=o.length,l=s<a?s:a;for(let c=0;c<l;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return s===a?0:s<a?-1:1}(Xr(t),Xr(e));case"Array":return function(i,o){const s=i.length,a=o.length,l=s<a?s:a;for(let c=0;c<l;++c){const u=de(i[c],o[c]);if(u!==0)return u}return s===a?0:s<a?-1:1}(t,e)}}catch{}return NaN}function Jr(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Qn(t);return n==="ArrayBuffer"?"binary":n}function Xr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Mo{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,re.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,re.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Je(n.algorithm,e)}_iterate(e,n){return nn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&he(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>nn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(nt(r,!0))return i.count({trans:n,query:{index:dn(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return nn(r,()=>(++o,!1),n,i).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var f=s(c,o),h=s(u,o);return f<h?-a:f>h?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&nt(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=dn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return nn(r,o=>i.push(o),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,nt(n)?Ln(n,()=>{var r=e;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):Ln(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ln(this._ctx,()=>{var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(e,n){return Fn(this._ctx,function(r,i,o){return!e(r.value)||(i(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return Fn(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=Je(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&nt(n,!0)&&n.limit>0)return this._read(i=>{var o=dn(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Fn(this._ctx,function(i){var o=i.primaryKey.toString(),s=_e(r,o);return r[o]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var o=ee(e),s=o.length;i=function(d){for(var m=!1,y=0;y<s;++y){var b=o[y],_=e[b];Re(d,b)!==_&&(ke(d,b,_),m=!0)}return m}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,f=[];let h=0;const p=[],g=(d,m)=>{const{failures:y,numFailures:b}=m;h+=d-b;for(let _ of ee(y))f.push(y[_])};return this.clone().primaryKeys().then(d=>{const m=y=>{const b=Math.min(u,d.length-y);return a.getMany({trans:r,keys:d.slice(y,y+b),cache:"immutable"}).then(_=>{const E=[],w=[],x=l?[]:null,k=[];for(let v=0;v<b;++v){const T=_[v],A={value:Wt(T),primKey:d[y+v]};i.call(A,A.value,A)!==!1&&(A.value==null?k.push(d[y+v]):l||de(c(T),c(A.value))===0?(w.push(A.value),l&&x.push(d[y+v])):(k.push(d[y+v]),E.push(A.value)))}const B=nt(n)&&n.limit===1/0&&(typeof e!="function"||e===qn)&&{index:n.index,range:n.range};return Promise.resolve(E.length>0&&a.mutate({trans:r,type:"add",values:E}).then(v=>{for(let T in v.failures)k.splice(parseInt(T),1);g(E.length,v)})).then(()=>(w.length>0||B&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:x,values:w,criteria:B,changeSpec:typeof e!="function"&&e}).then(v=>g(w.length,v))).then(()=>(k.length>0||B&&e===qn)&&a.mutate({trans:r,type:"delete",keys:k,criteria:B}).then(v=>g(k.length,v))).then(()=>d.length>y+b&&m(y+u))})};return m(0).then(()=>{if(f.length>0)throw new En("Error modifying one or more objects",f,h,p);return d.length})})})}delete(){var e=this._ctx,n=e.range;return nt(e)&&(e.isPrimKey&&!Co||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new En("Could not delete some values",Object.keys(a).map(f=>a[f]),s-u);return s-u}))}):this.modify(qn)}}const qn=(t,e)=>e.value=null;function Ro(t,e){return t<e?-1:t===e?0:1}function To(t,e){return t>e?-1:t===e?0:1}function ye(t,e,n){var r=t instanceof us?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function rt(t){return new t.Collection(t,()=>cs("")).limit(0)}function Io(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),a=-1,l=0;l<s;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function rn(t,e,n,r){var i,o,s,a,l,c,u,f=n.length;if(!n.every(d=>typeof d=="string"))return ye(t,os);function h(d){i=function(y){return y==="next"?b=>b.toUpperCase():b=>b.toLowerCase()}(d),o=function(y){return y==="next"?b=>b.toLowerCase():b=>b.toUpperCase()}(d),s=d==="next"?Ro:To;var m=n.map(function(y){return{lower:o(y),upper:i(y)}}).sort(function(y,b){return s(y.lower,b.lower)});a=m.map(function(y){return y.upper}),l=m.map(function(y){return y.lower}),c=d,u=d==="next"?"":r}h("next");var p=new t.Collection(t,()=>je(a[0],l[f-1]+r));p._ondirectionchange=function(d){h(d)};var g=0;return p._addAlgorithm(function(d,m,y){var b=d.key;if(typeof b!="string")return!1;var _=o(b);if(e(_,l,g))return!0;for(var E=null,w=g;w<f;++w){var x=Io(b,_,a[w],l[w],s,c);x===null&&E===null?g=w+1:(E===null||s(E,x)>0)&&(E=x)}return m(E!==null?function(){d.continue(E+u)}:y),!1}),p}function je(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function cs(t){return{type:1,lower:t,upper:t}}class us{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?rt(this):new this.Collection(this,()=>je(e,n,!r,!i))}catch{return ye(this,Se)}}equals(e){return e==null?ye(this,Se):new this.Collection(this,()=>cs(e))}above(e){return e==null?ye(this,Se):new this.Collection(this,()=>je(e,void 0,!0))}aboveOrEqual(e){return e==null?ye(this,Se):new this.Collection(this,()=>je(e,void 0,!1))}below(e){return e==null?ye(this,Se):new this.Collection(this,()=>je(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ye(this,Se):new this.Collection(this,()=>je(void 0,e))}startsWith(e){return typeof e!="string"?ye(this,os):this.between(e,e+Ve,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):rn(this,(n,r)=>n.indexOf(r[0])===0,[e],Ve)}equalsIgnoreCase(e){return rn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Oe.apply(st,arguments);return e.length===0?rt(this):rn(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Oe.apply(st,arguments);return e.length===0?rt(this):rn(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Ve)}anyOf(){const e=Oe.apply(st,arguments);let n=this._cmp;try{e.sort(n)}catch{return ye(this,Se)}if(e.length===0)return rt(this);const r=new this.Collection(this,()=>je(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((o,s,a)=>{const l=o.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return s(a),!1;return n(l,e[i])===0||(s(()=>{o.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[lr,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Oe.apply(st,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ye(this,Se)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[lr,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(e.length===0)return rt(this);if(!e.every(b=>b[0]!==void 0&&b[1]!==void 0&&i(b[0],b[1])<=0))return ye(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",j.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,f=i;function h(b,_){return f(b[0],_[0])}try{u=e.reduce(function(b,_){let E=0,w=b.length;for(;E<w;++E){const x=b[E];if(r(_[0],x[1])<0&&r(_[1],x[0])>0){x[0]=s(x[0],_[0]),x[1]=a(x[1],_[1]);break}}return E===w&&b.push(_),b},[]),u.sort(h)}catch{return ye(this,Se)}let p=0;const g=c?b=>i(b,u[p][1])>0:b=>i(b,u[p][1])>=0,d=l?b=>o(b,u[p][0])>0:b=>o(b,u[p][0])>=0;let m=g;const y=new this.Collection(this,()=>je(u[0][0],u[u.length-1][1],!l,!c));return y._ondirectionchange=b=>{b==="next"?(m=g,f=i):(m=d,f=o),u.sort(h)},y._addAlgorithm((b,_,E)=>{for(var w=b.key;m(w);)if(++p,p===u.length)return _(E),!1;return!!function(x){return!g(x)&&!d(x)}(w)||(this._cmp(w,u[p][1])===0||this._cmp(w,u[p][0])===0||_(()=>{f===i?b.continue(u[p][0]):b.continue(u[p][1])}),!1)}),y}startsWithAnyOf(){const e=Oe.apply(st,arguments);return e.every(n=>typeof n=="string")?e.length===0?rt(this):this.inAnyRange(e.map(n=>[n,n+Ve])):ye(this,"startsWithAnyOf() only works with strings")}}function Ee(t){return Y(function(e){return qt(e),t(e.target.error),!1})}function qt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Ut="storagemutated",ze="x-storagemutated-1",qe=Tt(null,Ut);class Do{_lock(){return kt(!I.global),++this._reculock,this._reculock!==1||I.global||(I.lockOwnerFor=this),this}_unlock(){if(kt(!I.global),--this._reculock==0)for(I.global||(I.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{bt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&I.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(kt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new j.DatabaseClosed(r);case"MissingAPIError":throw new j.MissingAPI(r.message,r);default:throw new j.OpenFailed(r)}if(!this.active)throw new j.TransactionInactive;return kt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Y(i=>{qt(i),this._reject(e.error)}),e.onabort=Y(i=>{qt(i),this.active&&this._reject(new j.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Y(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&qe.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return re(new j.ReadOnly("Transaction is readonly"));if(!this.active)return re(new j.TransactionInactive);if(this._locked())return new O((o,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,s)},I])});if(r)return Fe(()=>{var o=new O((s,a)=>{this._lock();const l=n(s,a,this);l&&l.then&&l.then(s,a)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new O((o,s)=>{var a=n(o,s,this);a&&a.then&&a.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=O.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new O((s,a)=>{r.then(l=>n._waitingQueue.push(Y(s.bind(null,l))),l=>n._waitingQueue.push(Y(a.bind(null,l)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new j.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(_e(n,e))return n[e];const r=this.schema[e];if(!r)throw new j.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function cr(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+fs(e)}}function fs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ds(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ui(n,r=>[r.name,r])}}let Ht=t=>{try{return t.only([[]]),Ht=()=>[[]],[[]]}catch{return Ht=()=>Ve,Ve}};function ur(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Re(r,e)}(t):e=>Re(e,t)}function $r(t){return[].slice.call(t)}let jo=0;function It(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Ko(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:f,upperOpen:h}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!f):e.bound(c,u,!!f,!!h)}const{schema:i,hasGetAll:o}=function(l,c){const u=$r(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(f=>c.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:p}=f,g=ae(h),d=h==null,m={},y={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:d,compound:g,keyPath:h,autoIncrement:p,unique:!0,extractKey:ur(h)},indexes:$r(f.indexNames).map(b=>f.index(b)).map(b=>{const{name:_,unique:E,multiEntry:w,keyPath:x}=b,k={name:_,compound:ae(x),keyPath:x,unique:E,multiEntry:w,extractKey:ur(x)};return m[It(x)]=k,k}),getIndexByKeyPath:b=>m[It(b)]};return m[":id"]=y.primaryKey,h!=null&&(m[It(h)]=y.primaryKey),y})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=i.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:f,type:h,keys:p,values:g,range:d}){return new Promise((m,y)=>{m=Y(m);const b=f.objectStore(u),_=b.keyPath==null,E=h==="put"||h==="add";if(!E&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:w}=p||g||{length:1};if(p&&g&&p.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(w===0)return m({numFailures:0,failures:{},results:[],lastResult:void 0});let x;const k=[],B=[];let v=0;const T=L=>{++v,qt(L)};if(h==="deleteRange"){if(d.type===4)return m({numFailures:v,failures:B,results:[],lastResult:void 0});d.type===3?k.push(x=b.clear()):k.push(x=b.delete(r(d)))}else{const[L,G]=E?_?[g,p]:[g,null]:[p,null];if(E)for(let q=0;q<w;++q)k.push(x=G&&G[q]!==void 0?b[h](L[q],G[q]):b[h](L[q])),x.onerror=T;else for(let q=0;q<w;++q)k.push(x=b[h](L[q])),x.onerror=T}const A=L=>{const G=L.target.result;k.forEach((q,Ie)=>q.error!=null&&(B[Ie]=q.error)),m({numFailures:v,failures:B,results:h==="delete"?p:k.map(q=>q.result),lastResult:G})};x.onerror=L=>{T(L),A(L)},x.onsuccess=A})},getMany:({trans:f,keys:h})=>new Promise((p,g)=>{p=Y(p);const d=f.objectStore(u),m=h.length,y=new Array(m);let b,_=0,E=0;const w=k=>{const B=k.target;y[B._pos]=B.result,++E===_&&p(y)},x=Ee(g);for(let k=0;k<m;++k)h[k]!=null&&(b=d.get(h[k]),b._pos=k,b.onsuccess=w,b.onerror=x,++_);_===0&&p(y)}),get:({trans:f,key:h})=>new Promise((p,g)=>{p=Y(p);const d=f.objectStore(u).get(h);d.onsuccess=m=>p(m.target.result),d.onerror=Ee(g)}),query:function(f){return h=>new Promise((p,g)=>{p=Y(p);const{trans:d,values:m,limit:y,query:b}=h,_=y===1/0?void 0:y,{index:E,range:w}=b,x=d.objectStore(u),k=E.isPrimaryKey?x:x.index(E.name),B=r(w);if(y===0)return p({result:[]});if(f){const v=m?k.getAll(B,_):k.getAllKeys(B,_);v.onsuccess=T=>p({result:T.target.result}),v.onerror=Ee(g)}else{let v=0;const T=m||!("openKeyCursor"in k)?k.openCursor(B):k.openKeyCursor(B),A=[];T.onsuccess=L=>{const G=T.result;return G?(A.push(m?G.value:G.primaryKey),++v===y?p({result:A}):void G.continue()):p({result:A})},T.onerror=Ee(g)}})}(o),openCursor:function({trans:f,values:h,query:p,reverse:g,unique:d}){return new Promise((m,y)=>{m=Y(m);const{index:b,range:_}=p,E=f.objectStore(u),w=b.isPrimaryKey?E:E.index(b.name),x=g?d?"prevunique":"prev":d?"nextunique":"next",k=h||!("openKeyCursor"in w)?w.openCursor(r(_),x):w.openKeyCursor(r(_),x);k.onerror=Ee(y),k.onsuccess=Y(B=>{const v=k.result;if(!v)return void m(null);v.___id=++jo,v.done=!1;const T=v.continue.bind(v);let A=v.continuePrimaryKey;A&&(A=A.bind(v));const L=v.advance.bind(v),G=()=>{throw new Error("Cursor not stopped")};v.trans=f,v.stop=v.continue=v.continuePrimaryKey=v.advance=()=>{throw new Error("Cursor not started")},v.fail=Y(y),v.next=function(){let q=1;return this.start(()=>q--?this.continue():this.stop()).then(()=>this)},v.start=q=>{const Ie=new Promise((te,Ue)=>{te=Y(te),k.onerror=Ee(Ue),v.fail=Ue,v.stop=_t=>{v.stop=v.continue=v.continuePrimaryKey=v.advance=G,te(_t)}}),xe=()=>{if(k.result)try{q()}catch(te){v.fail(te)}else v.done=!0,v.start=()=>{throw new Error("Cursor behind last entry")},v.stop()};return k.onsuccess=Y(te=>{k.onsuccess=xe,xe()}),v.continue=T,v.continuePrimaryKey=A,v.advance=L,xe(),Ie},m(v)},y)})},count({query:f,trans:h}){const{index:p,range:g}=f;return new Promise((d,m)=>{const y=h.objectStore(u),b=p.isPrimaryKey?y:y.index(p.name),_=r(g),E=_?b.count(_):b.count();E.onsuccess=Y(w=>d(w.target.result)),E.onerror=Ee(m)})}}}(l)),a={};return s.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Ht(e),schema:i}}function fr({_novip:t},e){const n=e.db,r=function(i,o,{IDBKeyRange:s,indexedDB:a},l){return{dbcore:function(u,f){return f.reduce((h,{create:p})=>({...h,...p(h)}),u)}(Ko(o,s,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const o=i.name;t.core.schema.tables.some(s=>s.name===o)&&(i.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=i.core))})}function Cn({_novip:t},e,n,r){n.forEach(i=>{const o=r[i];e.forEach(s=>{const a=Br(s,i);(!a||"value"in a&&a.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?Me(s,i,{get(){return this.table(i)},set(l){Fi(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,o))})})}function dr({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function zo(t,e){return t._cfg.version-e._cfg.version}function No(t,e,n,r){const i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),a=I.transless||I;Fe(()=>{I.trans=o,I.transless=a,e===0?(ee(i).forEach(l=>{Un(n,l,i[l].primKey,i[l].indexes)}),fr(t,n),O.follow(()=>t.on.populate.fire(o)).catch(s)):function({_novip:l},c,u,f){const h=[],p=l._versions;let g=l._dbSchema=mr(l,l.idbdb,f),d=!1;const m=p.filter(b=>b._cfg.version>=c);function y(){return h.length?O.resolve(h.shift()(u.idbtrans)).then(y):O.resolve()}return m.forEach(b=>{h.push(()=>{const _=g,E=b._cfg.dbschema;pr(l,_,f),pr(l,E,f),g=l._dbSchema=E;const w=hs(_,E);w.add.forEach(k=>{Un(f,k[0],k[1].primKey,k[1].indexes)}),w.change.forEach(k=>{if(k.recreate)throw new j.Upgrade("Not yet support for changing primary key");{const B=f.objectStore(k.name);k.add.forEach(v=>hr(B,v)),k.change.forEach(v=>{B.deleteIndex(v.name),hr(B,v)}),k.del.forEach(v=>B.deleteIndex(v))}});const x=b._cfg.contentUpgrade;if(x&&b._cfg.version>c){fr(l,f),u._memoizedTables={},d=!0;let k=Hi(E);w.del.forEach(A=>{k[A]=_[A]}),dr(l,[l.Transaction.prototype]),Cn(l,[l.Transaction.prototype],ee(k),k),u.schema=k;const B=Or(x);let v;B&&yt();const T=O.follow(()=>{if(v=x(u),v&&B){var A=Te.bind(null,null);v.then(A,A)}});return v&&typeof v.then=="function"?O.resolve(v):T.then(()=>v)}}),h.push(_=>{(!d||!Oo)&&function(E,w){[].slice.call(w.db.objectStoreNames).forEach(x=>E[x]==null&&w.db.deleteObjectStore(x))}(b._cfg.dbschema,_),dr(l,[l.Transaction.prototype]),Cn(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),y().then(()=>{var b,_;_=f,ee(b=g).forEach(E=>{_.db.objectStoreNames.contains(E)||Un(_,E,b[E].primKey,b[E].indexes)})})}(t,e,o,n).catch(s)})}function hs(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],o=e[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Tn)s.recreate=!0,n.change.push(s);else{const a=i.idxByName,l=o.idxByName;let c;for(c in a)l[c]||s.del.push(c);for(c in l){const u=a[c],f=l[c];u?u.src!==f.src&&s.change.push(f):s.add.push(f)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function Un(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>hr(i,o)),i}function hr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function mr(t,e,n){const r={};return xn(e.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const a=cr(fs(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[];for(let u=0;u<o.indexNames.length;++u){const f=o.index(o.indexNames[u]);s=f.keyPath;var c=cr(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(c)}r[i]=ds(i,a,l)}),r}function pr({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let a=0;a<s.indexNames.length;++a){const l=s.indexNames[a],c=s.index(l).keyPath,u=typeof c=="string"?c:"["+xn(c).join("+")+"]";if(e[o]){const f=e[o].idxByName[u];f&&(f.name=l,delete e[o].idxByName[u],e[o].idxByName[l]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&V.WorkerGlobalScope&&V instanceof V.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Fo{_parseStoresSpec(e,n){ee(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((s,a)=>{const l=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return cr(l,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),ae(c),a===0)}),o=i.shift();if(o.multi)throw new j.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new j.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new j.Schema("Index must have a name and cannot be an empty string")}),n[r]=ds(r,o,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?he(this._cfg.storesSource,e):e;const r=n._versions,i={};let o={};return r.forEach(s=>{he(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,dr(n,[n._allTables,n,n.Transaction.prototype]),Cn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ee(o),o),n._storeNames=ee(o),this}upgrade(e){return this._cfg.contentUpgrade=Mr(this._cfg.contentUpgrade||U,e),this}}function Dr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ze(In,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function jr(t){return t&&typeof t.databases=="function"}function gr(t){return Fe(function(){return I.letThrough=!0,t()})}function Lo(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function qo(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?re(e.dbOpenError):t);Ae&&(e.openCanceller._stackHolder=et()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new j.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,s=null,a=!1;return O.race([r,(typeof navigator>"u"?O.resolve():Lo()).then(()=>new O((l,c)=>{if(i(),!n)throw new j.MissingAPI;const u=t.name,f=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!f)throw new j.MissingAPI;f.onerror=Ee(c),f.onblocked=Y(t._fireOnBlocked),f.onupgradeneeded=Y(h=>{if(s=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=qt,s.abort(),f.result.close();const g=n.deleteDatabase(u);g.onsuccess=g.onerror=Y(()=>{c(new j.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{s.onerror=Ee(c);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;a=p<1,t._novip.idbdb=f.result,No(t,p/10,s,c)}},c),f.onsuccess=Y(()=>{s=null;const h=t._novip.idbdb=f.result,p=xn(h.objectStoreNames);if(p.length>0)try{const d=h.transaction((g=p).length===1?g[0]:g,"readonly");e.autoSchema?function({_novip:m},y,b){m.verno=y.version/10;const _=m._dbSchema=mr(0,y,b);m._storeNames=xn(y.objectStoreNames,0),Cn(m,[m._allTables],ee(_),_)}(t,h,d):(pr(t,t._dbSchema,d),function(m,y){const b=hs(mr(0,m.idbdb,y),m._dbSchema);return!(b.add.length||b.change.some(_=>_.add.length||_.change.length))}(t,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fr(t,d)}catch{}var g;Rt.push(t),h.onversionchange=Y(d=>{e.vcFired=!0,t.on("versionchange").fire(d)}),h.onclose=Y(d=>{t.on("close").fire(d)}),a&&function({indexedDB:d,IDBKeyRange:m},y){!jr(d)&&y!==In&&Dr(d,m).put({name:y}).catch(U)}(t._deps,u),l()},c)}))]).then(()=>(i(),e.onReadyBeingFired=[],O.resolve(gr(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(Mr,U);return e.onReadyBeingFired=[],O.resolve(gr(()=>c(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),re(l)}).finally(()=>{e.openComplete=!0,o()})}function yr(t){var e=o=>t.next(o),n=i(e),r=i(o=>t.throw(o));function i(o){return s=>{var a=o(s),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):ae(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function Uo(t,e,n){var r=arguments.length;if(r<2)throw new j.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,Vi(i),n]}function ms(t,e,n,r,i){return O.resolve().then(()=>{const o=I.transless||I,s=t._createTransaction(e,n,t._dbSchema,r),a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===Pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ms(t,e,n,null,i))):re(f)}const l=Or(i);let c;l&&yt();const u=O.follow(()=>{if(c=i.call(s,s),c)if(l){var f=Te.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=yr(c))},a);return(c&&typeof c.then=="function"?O.resolve(c).then(f=>s.active?f:re(new j.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(f=>(r&&s._resolve(),s._completion.then(()=>f))).catch(f=>(s._reject(f),re(f)))})}function sn(t,e,n){const r=ae(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Ho={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},o=[];function s(u,f,h){const p=It(u),g=i[p]=i[p]||[],d=u==null?0:typeof u=="string"?1:u.length,m=f>0,y={...h,isVirtual:m,keyTail:f,keyLength:d,extractKey:ur(u),unique:!m&&h.unique};return g.push(y),y.isPrimaryKey||o.push(y),d>1&&s(d===2?u[0]:u.slice(0,d-1),f+1,h),g.sort((b,_)=>b.keyTail-_.keyTail),y}const a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const u of r.indexes)s(u.keyPath,0,u);function l(u){const f=u.query.index;return f.isVirtual?{...u,query:{index:f,range:(h=u.query.range,p=f.keyTail,{type:h.type===1?2:h.type,lower:sn(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,p),lowerOpen:!0,upper:sn(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,p),upperOpen:!0})}}:u;var h,p}return{...n,schema:{...r,primaryKey:a,indexes:o,getIndexByKeyPath:function(u){const f=i[It(u)];return f&&f[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:f,isVirtual:h,keyLength:p}=u.query.index;return h?n.openCursor(l(u)).then(g=>g&&function(d){return Object.create(d,{continue:{value:function(y){y!=null?d.continue(sn(y,u.reverse?t.MAX_KEY:t.MIN_KEY,f)):u.unique?d.continue(d.key.slice(0,p).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,f)):d.continue()}},continuePrimaryKey:{value(y,b){d.continuePrimaryKey(sn(y,t.MAX_KEY,f),b)}},primaryKey:{get:()=>d.primaryKey},key:{get(){const y=d.key;return p===1?y[0]:y.slice(0,p)}},value:{get:()=>d.value}})}(g)):n.openCursor(u)}}}}}};function Kr(t,e,n,r){return n=n||{},r=r||"",ee(t).forEach(i=>{if(_e(e,i)){var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const a=Qn(o);a!==Qn(s)?n[r+i]=e[i]:a==="Object"?Kr(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),ee(e).forEach(i=>{_e(t,i)||(n[r+i]=e[i])}),n}const Vo={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=I.trans,{deleting:a,creating:l,updating:c}=s.table(e).hook;switch(o.type){case"add":if(l.fire===U)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(l.fire===U&&c.fire===U)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(a.fire===U)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(a.fire===U)break;return s._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(o),!0)}return n.mutate(o);function u(h){const p=I.trans,g=h.keys||function(d,m){return m.type==="delete"?m.keys:m.keys||m.values.map(d.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(d,m,y){return m.type==="add"?Promise.resolve([]):d.getMany({trans:m.trans,keys:y,cache:"immutable"})}(n,h,g).then(d=>{const m=g.map((y,b)=>{const _=d[b],E={onerror:null,onsuccess:null};if(h.type==="delete")a.fire.call(E,y,_,p);else if(h.type==="add"||_===void 0){const w=l.fire.call(E,y,h.values[b],p);y==null&&w!=null&&(y=w,h.keys[b]=y,r.outbound||ke(h.values[b],r.keyPath,y))}else{const w=Kr(_,h.values[b]),x=c.fire.call(E,w,y,_,p);if(x){const k=h.values[b];Object.keys(x).forEach(B=>{_e(k,B)?k[B]=x[B]:ke(k,B,x[B])})}}return E});return n.mutate(h).then(({failures:y,results:b,numFailures:_,lastResult:E})=>{for(let w=0;w<g.length;++w){const x=b?b[w]:g[w],k=m[w];x==null?k.onerror&&k.onerror(y[w]):k.onsuccess&&k.onsuccess(h.type==="put"&&d[w]?h.values[w]:x)}return{failures:y,results:b,numFailures:_,lastResult:E}}).catch(y=>(m.forEach(b=>b.onerror&&b.onerror(y)),Promise.reject(y)))})}function f(h,p,g){return n.query({trans:h,values:!1,query:{index:r,range:p},limit:g}).then(({result:d})=>u({type:"delete",keys:d,trans:h}).then(m=>m.numFailures>0?Promise.reject(m.failures[0]):d.length<g?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...p,lower:d[d.length-1],lowerOpen:!0},g)))}}}}})};function ps(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,o=0;i<e.keys.length&&o<t.length;++i)de(e.keys[i],t[o])===0&&(r.push(n?Wt(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}const Yo={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=ps(r.keys,r.trans._cache,r.cache==="clone");return i?O.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Wt(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function zr(t){return!("from"in t)}const Be=function(t,e){if(!this){const n=new Be;return t&&"d"in t&&he(n,t),n}he(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Vt(t,e,n){const r=de(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(zr(t))return he(t,{from:e,to:n,d:1});const i=t.l,o=t.r;if(de(n,t.from)<0)return i?Vt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},ei(t);if(de(e,t.to)>0)return o?Vt(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},ei(t);de(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),de(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;i&&!t.l&&Pn(t,i),o&&s&&Pn(t,o)}function Pn(t,e){zr(e)||function n(r,{from:i,to:o,l:s,r:a}){Vt(r,i,o),s&&n(r,s),a&&n(r,a)}(t,e)}function Wo(t,e){const n=br(e);let r=n.next();if(r.done)return!1;let i=r.value;const o=br(t);let s=o.next(i.from),a=s.value;for(;!r.done&&!s.done;){if(de(a.from,i.to)<=0&&de(a.to,i.from)>=0)return!0;de(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function br(t){let e=zr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&de(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||de(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function ei(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],s[i]=a[o],t[o]=s,s.d=ti(s)}t.d=ti(t)}function ti({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}dt(Be.prototype,{add(t){return Pn(this,t),this},addKey(t){return Vt(this,t,t),this},addKeys(t){return t.forEach(e=>Vt(this,e,e)),this},[Jn](){return br(this)}});const Go={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Be(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:a,outbound:l}=s,c={...i,mutate:h=>{const p=h.trans,g=p.mutatedParts||(p.mutatedParts={}),d=x=>{const k=`idb://${e}/${r}/${x}`;return g[k]||(g[k]=new Be)},m=d(""),y=d(":dels"),{type:b}=h;let[_,E]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const w=h.trans._cache;return i.mutate(h).then(x=>{if(ae(_)){b!=="delete"&&(_=x.results),m.addKeys(_);const k=ps(_,w);k||b==="add"||y.addKeys(_),(k||E)&&function(B,v,T,A){function L(G){const q=B(G.name||"");function Ie(te){return te!=null?G.extractKey(te):null}const xe=te=>G.multiEntry&&ae(te)?te.forEach(Ue=>q.addKey(Ue)):q.addKey(te);(T||A).forEach((te,Ue)=>{const _t=T&&Ie(T[Ue]),Dn=A&&Ie(A[Ue]);de(_t,Dn)!==0&&(_t!=null&&xe(_t),Dn!=null&&xe(Dn))})}v.indexes.forEach(L)}(d,o,k,E)}else if(_){const k={from:_.lower,to:_.upper};y.add(k),m.add(k)}else m.add(n),y.add(n),o.indexes.forEach(k=>d(k.name).add(n));return x})}},u=({query:{index:h,range:p}})=>{var g,d;return[h,new Be((g=p.lower)!==null&&g!==void 0?g:t.MIN_KEY,(d=p.upper)!==null&&d!==void 0?d:t.MAX_KEY)]},f={get:h=>[s,new Be(h.key)],getMany:h=>[s,new Be().addKeys(h.keys)],count:u,query:u,openCursor:u};return ee(f).forEach(h=>{c[h]=function(p){const{subscr:g}=I;if(g){const d=E=>{const w=`idb://${e}/${r}/${E}`;return g[w]||(g[w]=new Be)},m=d(""),y=d(":dels"),[b,_]=f[h](p);if(d(b.name||"").add(_),!b.isPrimaryKey){if(h!=="count"){const E=h==="query"&&l&&p.values&&i.query({...p,values:!1});return i[h].apply(this,arguments).then(w=>{if(h==="query"){if(l&&p.values)return E.then(({result:k})=>(m.addKeys(k),w));const x=p.values?w.result.map(a):w.result;p.values?m.addKeys(x):y.addKeys(x)}else if(h==="openCursor"){const x=w,k=p.values;return x&&Object.create(x,{key:{get:()=>(y.addKey(x.primaryKey),x.key)},primaryKey:{get(){const B=x.primaryKey;return y.addKey(B),B}},value:{get:()=>(k&&m.addKey(x.primaryKey),x.value)}})}return w})}y.add(n)}}return i[h].apply(this,arguments)}}),c}}}};class Ze{constructor(e,n){this._middlewares={},this.verno=0;const r=Ze.dependencies;this._options=n={addons:Ze.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:U,dbReadyPromise:null,cancelOpen:U,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new O(a=>{o.dbReadyResolve=a}),o.openCanceller=new O((a,l)=>{o.cancelOpen=l}),this._state=o,this.name=e,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[Mr,U]}),this.on.ready.subscribe=Li(this.on.ready.subscribe,a=>(l,c)=>{Ze.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||O.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const f=this;c||a(function h(){f.on.ready.unsubscribe(l),f.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,wt(Mo.prototype,function(a,l){this.db=s;let c=ls,u=null;if(l)try{c=l()}catch(g){u=g}const f=a._ctx,h=f.table,p=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:f.or,valueMapper:p!==Ft?p:null}})),this.Table=function(a){return wt(Po.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:Tt(null,{creating:[bo,U],reading:[yo,Ft],updating:[vo,U],deleting:[_o,U]})})}(this),this.Transaction=function(a){return wt(Do.prototype,function(l,c,u,f,h){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new O((p,g)=>{this._resolve=p,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},p=>{var g=this.active;return this.active=!1,this.on.error.fire(p),this.parent?this.parent._reject(p):g&&this.idbtrans&&this.idbtrans.abort(),re(p)})})}(this),this.Version=function(a){return wt(Fo.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return wt(us.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:u};const f=a._deps.indexedDB;if(!f)throw new j.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,p)=>f.cmp(p,h),this._max=(h,p)=>f.cmp(h,p)>0?h:p,this._min=(h,p)=>f.cmp(h,p)<0?h:p,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Ht(n.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Rt.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Ho),this.use(Vo),this.use(Go),this.use(Yo),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new j.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new j.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(zo),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||I.letThrough||this._vip)?e():new O((n,r)=>{if(this._state.openComplete)return r(new j.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new j.DatabaseClosed);this.open().catch(U)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:i}),o.sort((s,a)=>s.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return qo(this)}_close(){const e=this._state,n=Rt.indexOf(this);if(n>=0&&Rt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new O(r=>{e.dbReadyResolve=r}),e.openCanceller=new O((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new j.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new O((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Y(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!jr(a)&&c!==In&&Dr(a,l).delete(c).catch(U)})(this._deps,this.name),r()}),s.onerror=Ee(i),s.onblocked=this._fireOnBlocked};if(e)throw new j.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ee(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Uo.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=I.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const o=e.indexOf("?")!==-1;let s,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===zn)s=zn;else{if(e!="rw"&&e!=Nn)throw new j.InvalidArgument("Invalid transaction mode: "+e);s=Nn}if(i){if(i.mode===zn&&s===Nn){if(!o)throw new j.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new j.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,f)=>{f(c)}):re(c)}const l=ms.bind(null,this,s,a,i,r);return i?i._promise(s,l,"lock"):I.trans?bt(I.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!_e(this._allTables,e))throw new j.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Zo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Qo{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Zo](){return this}}function gs(t,e){return ee(e).forEach(n=>{Pn(t[n]||(t[n]=new Be),e[n])}),t}function ys(t){let e,n=!1;const r=new Qo(i=>{const o=Or(t);let s=!1,a={},l={};const c={get closed(){return s},unsubscribe:()=>{s=!0,qe.storagemutated.unsubscribe(p)}};i.start&&i.start(c);let u=!1,f=!1;function h(){return ee(l).some(d=>a[d]&&Wo(a[d],l[d]))}const p=d=>{gs(a,d),h()&&g()},g=()=>{if(u||s)return;a={};const d={},m=function(y){o&&yt();const b=()=>Fe(t,{subscr:y,trans:null}),_=I.trans?bt(I.transless,b):b();return o&&_.then(Te,Te),_}(d);f||(qe(Ut,p),f=!0),u=!0,Promise.resolve(m).then(y=>{n=!0,e=y,u=!1,s||(h()?g():(a={},l=d,i.next&&i.next(y)))},y=>{u=!1,n=!1,i.error&&i.error(y),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let _r;try{_r={indexedDB:V.indexedDB||V.mozIndexedDB||V.webkitIndexedDB||V.msIndexedDB,IDBKeyRange:V.IDBKeyRange||V.webkitIDBKeyRange}}catch{_r={indexedDB:null,IDBKeyRange:null}}const He=Ze;function hn(t){let e=Pe;try{Pe=!0,qe.storagemutated.fire(t)}finally{Pe=e}}dt(He,{...an,delete:t=>new He(t,{addons:[]}).delete(),exists:t=>new He(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return jr(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==In)):Dr(e,n).toCollection().primaryKeys()}(He.dependencies).then(t)}catch{return re(new j.MissingAPI)}},defineClass:()=>function(t){he(this,t)},ignoreTransaction:t=>I.trans?bt(I.transless,t):t(),vip:gr,async:function(t){return function(){try{var e=yr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:O.resolve(e)}catch(n){return re(n)}}},spawn:function(t,e,n){try{var r=yr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:O.resolve(r)}catch(i){return re(i)}},currentTransaction:{get:()=>I.trans||null},waitFor:function(t,e){const n=O.resolve(typeof t=="function"?He.ignoreTransaction(t):t).timeout(e||6e4);return I.trans?I.trans.waitFor(n):n},Promise:O,debug:{get:()=>Ae,set:t=>{Wi(t,t==="dexie"?()=>!0:as)}},derive:lt,extend:he,props:dt,override:Li,Events:Tt,on:qe,liveQuery:ys,extendObservabilitySet:gs,getByKeyPath:Re,setByKeyPath:ke,delByKeyPath:function(t,e){typeof e=="string"?ke(t,e,void 0):"length"in e&&[].map.call(e,function(n){ke(t,n,void 0)})},shallowClone:Hi,deepClone:Wt,getObjectDiff:Kr,cmp:de,asap:qi,minKey:lr,addons:[],connections:Rt,errnames:Pr,dependencies:_r,semVer:Gr,version:Gr.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),He.maxKey=Ht(He.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qe(Ut,t=>{if(!Pe){let e;Tn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ze,!0,!0,t)):e=new CustomEvent(ze,{detail:t}),Pe=!0,dispatchEvent(e),Pe=!1}}),addEventListener(ze,({detail:t})=>{Pe||hn(t)}));let Pe=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(ze);typeof t.unref=="function"&&t.unref(),qe(Ut,e=>{Pe||t.postMessage(e)}),t.onmessage=e=>{e.data&&hn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){qe(Ut,e=>{try{Pe||(typeof localStorage<"u"&&localStorage.setItem(ze,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ze,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ze){const n=JSON.parse(e.newValue);n&&hn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===ze&&hn(e.changedParts)})}O.rejectionMapper=function(t,e){if(!t||t instanceof ct||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Hr[t.name])return t;var n=new Hr[t.name](e||t.message,t);return"stack"in t&&Me(n,"stack",{get:function(){return this.inner.stack}}),n},Wi(Ae,as);class Jo extends Ze{constructor(){super("bookDB");Qt(this,"books");this.version(5).stores({books:"++id, meta, contents, spine, toc, files, progress"})}}const we=new Jo,Xo=async t=>{for(let e of await we.books.toArray())if(e.meta.title===t.meta.title)return e.id;try{return await we.books.add(t)}catch(e){console.log(e)}};function bs(t){return t.arrayBuffer?t.arrayBuffer():new Promise((e,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{e(r.result)}),r.addEventListener("error",n),r.readAsArrayBuffer(t)})}async function $o(t){const e=await bs(t);return new Uint8Array(e)}function _s(t){return typeof Blob<"u"&&t instanceof Blob}function Yt(t){return typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}const ea=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function ta(t){return t.byteOffset===0&&t.byteLength===t.buffer.byteLength}class ni{constructor(e){this.typedArray=e instanceof ArrayBuffer||Yt(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,n){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,n)}}class ri{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,n){const r=this.blob.slice(e,e+n),i=await bs(r);return new Uint8Array(i)}async sliceAsBlob(e,n,r=""){return this.blob.slice(e,e+n,r)}}function na(t,e){var n=Uint8Array;if(t[0]==3&&t[1]==0)return e||new n(0);var r=ia,i=vs,o=ra,s=ws,a=e==null;a&&(e=new n(t.length>>>2<<3));for(var l=0,c=0,u=0,f=0,h=0,p=0,g=0,d=0,m=0,y,b;l==0;){if(l=r(t,m,1),c=r(t,m+1,2),m+=3,c==0){m&7&&(m+=8-(m&7));var _=(m>>>3)+4,E=t[_-4]|t[_-3]<<8;a&&(e=Hn(e,d+E)),e.set(new n(t.buffer,t.byteOffset+_,E),d),m=_+E<<3,d+=E;continue}if(a&&(e=Hn(e,d+(1<<17))),c==1&&(y=D.flmap,b=D.fdmap,p=(1<<9)-1,g=(1<<5)-1),c==2){u=i(t,m,5)+257,f=i(t,m+5,5)+1,h=i(t,m+10,4)+4,m+=14;for(var w=0;w<38;w+=2)D.itree[w]=0,D.itree[w+1]=0;for(var x=1,w=0;w<h;w++){var k=i(t,m+w*3,3);D.itree[(D.ordr[w]<<1)+1]=k,k>x&&(x=k)}m+=3*h,Dt(D.itree,x),jt(D.itree,x,D.imap),y=D.lmap,b=D.dmap,m=o(D.imap,(1<<x)-1,u+f,t,m,D.ttree);var B=ii(D.ttree,0,u,D.ltree);p=(1<<B)-1;var v=ii(D.ttree,u,f,D.dtree);g=(1<<v)-1,Dt(D.ltree,B),jt(D.ltree,B,y),Dt(D.dtree,v),jt(D.dtree,v,b)}for(;;){var T=y[s(t,m)&p];m+=T&15;var A=T>>>4;if(!(A>>>8))e[d++]=A;else{if(A==256)break;var L=d+A-254;if(A>264){var G=D.ldef[A-257];L=d+(G>>>3)+i(t,m,G&7),m+=G&7}var q=b[s(t,m)&g];m+=q&15;var Ie=q>>>4,xe=D.ddef[Ie],te=(xe>>>4)+r(t,m,xe&15);for(m+=xe&15,a&&(e=Hn(e,d+(1<<17)));d<L;)e[d]=e[d++-te],e[d]=e[d++-te],e[d]=e[d++-te],e[d]=e[d++-te];d=L}}}return e.length==d?e:e.slice(0,d)}function Hn(t,e){var n=t.length;if(e<=n)return t;var r=new Uint8Array(Math.max(n<<1,e));return r.set(t,0),r}function ra(t,e,n,r,i,o){for(var s=vs,a=ws,l=0;l<n;){var c=t[a(r,i)&e];i+=c&15;var u=c>>>4;if(u<=15)o[l]=u,l++;else{var f=0,h=0;u==16?(h=3+s(r,i,2),i+=2,f=o[l-1]):u==17?(h=3+s(r,i,3),i+=3):u==18&&(h=11+s(r,i,7),i+=7);for(var p=l+h;l<p;)o[l]=f,l++}}return i}function ii(t,e,n,r){for(var i=0,o=0,s=r.length>>>1;o<n;){var a=t[o+e];r[o<<1]=0,r[(o<<1)+1]=a,a>i&&(i=a),o++}for(;o<s;)r[o<<1]=0,r[(o<<1)+1]=0,o++;return i}function Dt(t,e){for(var n=t.length,r,i,o,s,a,l=D.bl_count,s=0;s<=e;s++)l[s]=0;for(s=1;s<n;s+=2)l[t[s]]++;var c=D.next_code;for(r=0,l[0]=0,i=1;i<=e;i++)r=r+l[i-1]<<1,c[i]=r;for(o=0;o<n;o+=2)a=t[o+1],a!=0&&(t[o]=c[a],c[a]++)}function jt(t,e,n){for(var r=t.length,i=D.rev15,o=0;o<r;o+=2)if(t[o+1]!=0)for(var s=o>>1,a=t[o+1],l=s<<4|a,c=e-a,u=t[o]<<c,f=u+(1<<c);u!=f;){var h=i[u]>>>15-e;n[h]=l,u++}}function si(t,e){for(var n=D.rev15,r=15-e,i=0;i<t.length;i+=2){var o=t[i]<<e-t[i+1];t[i]=n[o]>>>r}}function vs(t,e,n){return(t[e>>>3]|t[(e>>>3)+1]<<8)>>>(e&7)&(1<<n)-1}function ia(t,e,n){return(t[e>>>3]|t[(e>>>3)+1]<<8|t[(e>>>3)+2]<<16)>>>(e&7)&(1<<n)-1}function ws(t,e){return(t[e>>>3]|t[(e>>>3)+1]<<8|t[(e>>>3)+2]<<16)>>>(e&7)}const D=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(1<<15),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(1<<16),prev:new t(1<<15)}}();(function(){for(var t=32768,e=0;e<t;e++){var n=e;n=(n&2863311530)>>>1|(n&1431655765)<<1,n=(n&3435973836)>>>2|(n&858993459)<<2,n=(n&4042322160)>>>4|(n&252645135)<<4,n=(n&4278255360)>>>8|(n&16711935)<<8,D.rev15[e]=(n>>>16|n<<16)>>>17}function r(i,o,s){for(;o--!=0;)i.push(0,s)}for(var e=0;e<32;e++)D.ldef[e]=D.of0[e]<<3|D.exb[e],D.ddef[e]=D.df0[e]<<4|D.dxb[e];r(D.fltree,144,8),r(D.fltree,255-143,9),r(D.fltree,279-255,7),r(D.fltree,287-279,8),Dt(D.fltree,9),jt(D.fltree,9,D.flmap),si(D.fltree,9),r(D.fdtree,32,5),Dt(D.fdtree,5),jt(D.fdtree,5,D.fdmap),si(D.fdtree,5),r(D.itree,19,0),r(D.ltree,286,0),r(D.dtree,30,0),r(D.ttree,320,0)})();const oi={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,r=0;r<8;r++)n&1?n=3988292384^n>>>1:n=n>>>1;t[e]=n}return t}(),update:function(t,e,n,r){for(var i=0;i<r;i++)t=oi.table[(t^e[n+i])&255]^t>>>8;return t},crc:function(t,e,n){return oi.update(4294967295,t,e,n)^4294967295}};function sa(t,e){return na(t,e)}const ai={numWorkers:1,workerURL:"",useWorkers:!1};let oa=0;const mn=[];function Vn(t){return new Promise((e,n)=>{const r=new Worker(t);r.onmessage=i=>{i.data==="start"?(r.onerror=void 0,r.onmessage=void 0,e(r)):n(new Error(`unexpected message: ${i.data}`))},r.onerror=n})}function aa(t,e){return t.require?t.require(e):{}}(function(){if(ea){const{Worker:t}=aa(Cs,"worker_threads");return{async createWorker(e){return new t(e)},addEventListener(e,n){e.on("message",r=>{n({target:e,data:r})})},async terminate(e){await e.terminate()}}}else return{async createWorker(t){try{return await Vn(t)}catch{console.warn("could not load worker:",t)}let e;try{const n=await fetch(t,{mode:"cors"});if(!n.ok)throw new Error(`could not load: ${t}`);e=await n.text(),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));const r=await Vn(t);return ai.workerURL=t,r}catch{console.warn("could not load worker via fetch:",t)}if(e!==void 0)try{t=`data:application/javascript;base64,${btoa(e)}`;const n=await Vn(t);return ai.workerURL=t,n}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(t,e){t.addEventListener("message",e)},async terminate(t){t.terminate()}}})();function la(t,e,n,r){const i=new Uint8Array(e);sa(t,i),r(n?new Blob([i],{type:n}):i.buffer)}async function ca(){if(mn.length!==0)for(;mn.length;){const{src:t,uncompressedSize:e,type:n,resolve:r}=mn.shift();let i=t;_s(t)&&(i=await $o(t)),la(i,e,n,r)}}function ks(t,e,n){return new Promise((r,i)=>{mn.push({src:t,uncompressedSize:e,type:n,resolve:r,reject:i,id:oa++}),ca()})}function ua(t,e){const n=t&31,r=(t>>5&15)-1,i=(t>>9&127)+1980,o=0,s=(e&31)*2,a=e>>5&63,l=e>>11&31;return new Date(i,r,n,l,a,s,o)}class fa{constructor(e,n){this._reader=e,this._rawEntry=n,this.name=n.name,this.nameBytes=n.nameBytes,this.size=n.uncompressedSize,this.compressedSize=n.compressedSize,this.comment=n.comment,this.commentBytes=n.commentBytes,this.compressionMethod=n.compressionMethod,this.lastModDate=ua(n.lastModFileDate,n.lastModFileTime),this.isDirectory=n.uncompressedSize===0&&n.name.endsWith("/"),this.encrypted=!!(n.generalPurposeBitFlag&1),this.externalFileAttributes=n.externalFileAttributes,this.versionMadeBy=n.versionMadeBy}async blob(e="application/octet-stream"){return await ka(this._reader,this._rawEntry,e)}async arrayBuffer(){return await wa(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return Kt(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}const Yn=22,da=65535,ha=101010256,ma=101075792;async function ht(t,e,n){return await t.read(e,n)}async function vr(t,e,n,r){return t.sliceAsBlob?await t.sliceAsBlob(e,n,r):await t.read(e,n)}const pa={unsigned(){return 0}};function se(t,e){return t[e]+t[e+1]*256}function fe(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216}function Ye(t,e){return fe(t,e)+fe(t,e+4)*4294967296}const ga=new TextDecoder;function Kt(t,e){return Yt(t.buffer)&&(t=new Uint8Array(t)),ga.decode(t)}async function ya(t,e){const n=Math.min(Yn+da,e),r=e-n,i=await ht(t,r,n);for(let o=n-Yn;o>=0;--o){if(fe(i,o)!==ha)continue;const s=new Uint8Array(i.buffer,i.byteOffset+o,i.byteLength-o),a=se(s,4);if(a!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${a}`);const l=se(s,10),c=fe(s,12),u=fe(s,16),f=se(s,20),h=s.length-Yn;if(f!==h)throw new Error(`invalid comment length. expected: ${h}, actual: ${f}`);const p=new Uint8Array(s.buffer,s.byteOffset+22,f),g=Kt(p);return l===65535||u===4294967295?await _a(t,r+o,g,p):await xs(t,u,c,l,g,p)}throw new Error("could not find end of central directory. maybe not zip file")}const ba=117853008;async function _a(t,e,n,r){const i=e-20,o=await ht(t,i,20);if(fe(o,0)!==ba)throw new Error("invalid zip64 end of central directory locator signature");const s=Ye(o,8),a=await ht(t,s,56);if(fe(a,0)!==ma)throw new Error("invalid zip64 end of central directory record signature");const l=Ye(a,32),c=Ye(a,40),u=Ye(a,48);return xs(t,u,c,l,n,r)}const va=33639248;async function xs(t,e,n,r,i,o){let s=0;const a=await ht(t,e,n),l=[];for(let u=0;u<r;++u){const f=a.subarray(s,s+46),h=fe(f,0);if(h!==va)throw new Error(`invalid central directory file header signature: 0x${h.toString(16)}`);const p={versionMadeBy:se(f,4),versionNeededToExtract:se(f,6),generalPurposeBitFlag:se(f,8),compressionMethod:se(f,10),lastModFileTime:se(f,12),lastModFileDate:se(f,14),crc32:fe(f,16),compressedSize:fe(f,20),uncompressedSize:fe(f,24),fileNameLength:se(f,28),extraFieldLength:se(f,30),fileCommentLength:se(f,32),internalFileAttributes:se(f,36),externalFileAttributes:fe(f,38),relativeOffsetOfLocalHeader:fe(f,42)};if(p.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");s+=46;const g=a.subarray(s,s+p.fileNameLength+p.extraFieldLength+p.fileCommentLength);p.nameBytes=g.slice(0,p.fileNameLength),p.name=Kt(p.nameBytes);const d=p.fileNameLength+p.extraFieldLength,m=g.slice(p.fileNameLength,d);p.extraFields=[];let y=0;for(;y<m.length-3;){const _=se(m,y+0),E=se(m,y+2),w=y+4,x=w+E;if(x>m.length)throw new Error("extra field length exceeds extra field buffer size");p.extraFields.push({id:_,data:m.slice(w,x)}),y=x}if(p.commentBytes=g.slice(d,d+p.fileCommentLength),p.comment=Kt(p.commentBytes),s+=g.length,p.uncompressedSize===4294967295||p.compressedSize===4294967295||p.relativeOffsetOfLocalHeader===4294967295){const _=p.extraFields.find(x=>x.id===1);if(!_)throw new Error("expected zip64 extended information extra field");const E=_.data;let w=0;if(p.uncompressedSize===4294967295){if(w+8>E.length)throw new Error("zip64 extended information extra field does not include uncompressed size");p.uncompressedSize=Ye(E,w),w+=8}if(p.compressedSize===4294967295){if(w+8>E.length)throw new Error("zip64 extended information extra field does not include compressed size");p.compressedSize=Ye(E,w),w+=8}if(p.relativeOffsetOfLocalHeader===4294967295){if(w+8>E.length)throw new Error("zip64 extended information extra field does not include relative header offset");p.relativeOffsetOfLocalHeader=Ye(E,w),w+=8}}const b=p.extraFields.find(_=>_.id===28789&&_.data.length>=6&&_.data[0]===1&&fe(_.data,1),pa.unsigned(p.nameBytes));if(b&&(p.fileName=Kt(b.data.slice(5))),p.compressionMethod===0){let _=p.uncompressedSize;if(p.generalPurposeBitFlag&1&&(_+=12),p.compressedSize!==_)throw new Error(`compressed size mismatch for stored file: ${p.compressedSize} != ${_}`)}l.push(p)}return{zip:{comment:i,commentBytes:o},entries:l.map(u=>new fa(t,u))}}async function Es(t,e){if(e.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const n=await ht(t,e.relativeOffsetOfLocalHeader,30),r=await t.getLength(),i=fe(n,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);const o=se(n,26),s=se(n,28),a=e.relativeOffsetOfLocalHeader+n.length+o+s;let l;if(e.compressionMethod===0)l=!1;else if(e.compressionMethod===8)l=!0;else throw new Error(`unsupported compression method: ${e.compressionMethod}`);const c=a,u=c+e.compressedSize;if(e.compressedSize!==0&&u>r)throw new Error(`file data overflows file bounds: ${c} +  ${e.compressedSize}  > ${r}`);return{decompress:l,fileDataStart:c}}async function wa(t,e){const{decompress:n,fileDataStart:r}=await Es(t,e);if(!n){const s=await ht(t,r,e.compressedSize);return ta(s)?s.buffer:s.slice().buffer}const i=await vr(t,r,e.compressedSize);return await ks(i,e.uncompressedSize)}async function ka(t,e,n){const{decompress:r,fileDataStart:i}=await Es(t,e);if(!r){const a=await vr(t,i,e.compressedSize,n);return _s(a)?a:new Blob([Yt(a.buffer)?new Uint8Array(a):a],{type:n})}const o=await vr(t,i,e.compressedSize);return await ks(o,e.uncompressedSize,n)}async function xa(t){let e;if(typeof Blob<"u"&&t instanceof Blob)e=new ri(t);else if(t instanceof ArrayBuffer||t&&t.buffer&&t.buffer instanceof ArrayBuffer)e=new ni(t);else if(Yt(t)||Yt(t.buffer))e=new ni(t);else if(typeof t=="string"){const r=await fetch(t);if(!r.ok)throw new Error(`failed http request ${t}, status: ${r.status}: ${r.statusText}`);const i=await r.blob();e=new ri(i)}else if(typeof t.getLength=="function"&&typeof t.read=="function")e=t;else throw new Error("unsupported source type");const n=await e.getLength();if(n>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${n}. Only file sizes up 4503599627370496 bytes are supported`);return await ya(e,n)}async function Ea(t){const{zip:e,entries:n}=await xa(t);return{zip:e,entries:Object.fromEntries(n.map(r=>[r.name,r]))}}const Nr=new DOMParser,Aa=(t,e)=>{const n=Nr.parseFromString(t,"text/xml"),{title:r,author:i,coverId:o}=Ba(n.querySelector("metadata")),s=Oa(n.querySelector("manifest")),a=Ca(n.querySelector("spine"),s),l=s.has(o)?e.get(s.get(o)):void 0;return{meta:{title:r,author:i,cover:l},spine:a}},Sa=async t=>{const{entries:e}=await Ea(t),n=new Map,r=new Map,i=new Map,o=new Map;let s="",a="";for(const[l,c]of Object.entries(e))switch(l.substring(l.lastIndexOf("."))){case".opf":a=await c.text();break;case".png":case".jpg":case".jpeg":case".gif":{const u=await c.blob();n.set(ft(l),u);break}case".css":{const u=await c.text();i.set(l,Ma(u,"#container"));break}case".htm":case".xml":case".html":case".xhtml":{const u=await c.text();r.set(ft(l),u);break}case".otf":case".ttf":case".woff":{const u=await c.blob();o.set(ft(l),u);break}case".ncx":{s=await c.text();break}}return{images:n,htmls:r,styles:i,fonts:o,tocNcx:s,opf:a}},Ba=t=>{var i;const e=t.querySelector("title").textContent,n=Array.from(t.querySelectorAll("creator")).map(o=>o.textContent),r=(i=t.querySelector("[name='cover']"))==null?void 0:i.attributes.content.value;return{title:e,author:n,coverId:r}},Oa=t=>{const e=new Map;for(const n of t.children)e.set(n.attributes.id.value,ft(n.attributes.href.value));return e},Ca=(t,e)=>Array.from(t.children).map(n=>e.get(n.attributes.idref.value)),ft=t=>decodeURI(t.split("\\").pop().split("/").pop()),Pa=(t,e)=>{const n=Nr.parseFromString(t,"application/xhtml+xml").querySelector("img");if(n&&n.hasAttribute("src"))return e.get(ft(n.getAttribute("src")))},Ma=(t,e)=>{let n=[];return t=t.replace(/@(-moz-|-webkit-|-ms-)*keyframes\s(.*?){([0-9%a-zA-Z,\s.]*{(.*?)})*[\s\n]*}/g,r=>n.push(r)&&"__keyframes__"),t=t.replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,r=>r.trim()[0]==="@"?r:r.replace(/(\s*)/,"$1"+e+" ")),t.replace(/__keyframes__/g,r=>n.shift())},Ra=(t,e)=>{const n=[],r=Nr.parseFromString(t,"application/xml").querySelectorAll("navPoint");for(const i of r){const o=i.querySelector("text").textContent;let s=ft(i.querySelector("content").attributes.src.value);s.includes("#")&&(s=s.substring(0,s.indexOf("#")));const a=e.get(s).index,l=i.parentElement.nodeName==="navPoint";n.push({name:o,index:a,isChild:l})}return n},Ta=async t=>{try{const{images:e,htmls:n,styles:r,fonts:i,tocNcx:o,opf:s}=await Sa(t),{meta:a,spine:l}=Aa(s,e);a.cover===void 0&&(a.cover=Pa(n.get(l[0]),e));const c=new Map;l.forEach((f,h)=>{c.set(f,{index:h,html:n.has(f)?n.get(f):null})});const u=Ra(o,c);return{meta:a,contents:c,spine:l,toc:u,files:{images:e,fonts:i,styles:r},progress:0}}catch{throw new Error(t.name+" does not appear to be a valid EPUB file")}},Ia=(t,e,n)=>t.replace(/url\((?!['"]?(?:data):)['"]?([^'"\)]*)['"]?\)/g,function(i,o){const s=o.split("\\").pop().split("/").pop(),a=[".png",".jpg",".jpeg",".gif"],l=[".otf",".ttf",".woff"];return a.some(c=>s.endsWith(c))&&e.has(s)?"url("+URL.createObjectURL(e.get(s))+")":l.some(c=>s.endsWith(c))&&n.has(s)?"url("+URL.createObjectURL(n.get(s))+")":""}),Da=t=>{try{return t.files.styles.forEach((e,n,r)=>r.set(n,Ia(e,t.files.images,t.files.fonts))),t}catch{alert("An error occured when preparing book, please try removing it and adding it again")}};function As(t){const e=t-1;return e*e*e+1}function mt(t,{delay:e=0,duration:n=400,easing:r=Mn}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function li(t,{delay:e=0,duration:n=400,easing:r=As,x:i=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(t),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-s),[f,h]=qr(i),[p,g]=qr(o);return{delay:e,duration:n,easing:r,css:(d,m)=>`
			transform: ${c} translate(${(1-d)*f}${h}, ${(1-d)*p}${g});
			opacity: ${l-u*m}`}}const ja=t=>({}),ci=t=>({}),Ka=t=>({}),ui=t=>({}),za=t=>({}),fi=t=>({});function Na(t){let e,n,r,i,o,s,a,l;const c=t[2].leftbar,u=Et(c,t,t[1],fi),f=t[2].toptext,h=Et(f,t,t[1],ui),p=t[2].rightbar,g=Et(p,t,t[1],ci);return{c(){e=R("div"),n=R("div"),u&&u.c(),r=F(),i=R("div"),h&&h.c(),o=F(),s=R("div"),g&&g.c(),M(n,"class","buttonbar svelte-ybjroz"),M(n,"id","leftbar"),M(i,"id","toptext"),M(i,"class","svelte-ybjroz"),M(s,"class","buttonbar svelte-ybjroz"),M(s,"id","rightbar"),M(e,"id","topbar"),M(e,"style",a=t[0]?"color: rgba(var(--primary-color), 0.6);":" "),M(e,"class","svelte-ybjroz")},m(d,m){P(d,e,m),S(e,n),u&&u.m(n,null),S(e,r),S(e,i),h&&h.m(i,null),S(e,o),S(e,s),g&&g.m(s,null),l=!0},p(d,[m]){u&&u.p&&(!l||m&2)&&St(u,c,d,d[1],l?At(c,d[1],m,za):Bt(d[1]),fi),h&&h.p&&(!l||m&2)&&St(h,f,d,d[1],l?At(f,d[1],m,Ka):Bt(d[1]),ui),g&&g.p&&(!l||m&2)&&St(g,p,d,d[1],l?At(p,d[1],m,ja):Bt(d[1]),ci),(!l||m&1&&a!==(a=d[0]?"color: rgba(var(--primary-color), 0.6);":" "))&&M(e,"style",a)},i(d){l||(K(u,d),K(h,d),K(g,d),l=!0)},o(d){N(u,d),N(h,d),N(g,d),l=!1},d(d){d&&C(e),u&&u.d(d),h&&h.d(d),g&&g.d(d)}}}function Fa(t,e,n){let{$$slots:r={},$$scope:i}=e,{toned:o=!1}=e;return t.$$set=s=>{"toned"in s&&n(0,o=s.toned),"$$scope"in s&&n(1,i=s.$$scope)},[o,i,r]}class Ss extends ue{constructor(e){super(),ce(this,e,Fa,Na,le,{toned:0})}}function La(t){let e,n,r,i,o,s,a,l,c;return{c(){e=R("button"),e.textContent="warm",n=F(),r=R("button"),r.textContent="black",i=F(),o=R("button"),o.textContent="dark",s=F(),a=R("button"),a.textContent="light",ie(e,"background-color","#f6e4bd"),ie(e,"color","#000"),M(e,"class","svelte-k014sn"),ie(r,"background-color","#000"),ie(r,"color","#e9e9e9"),M(r,"class","svelte-k014sn"),ie(o,"background-color","#032038"),ie(o,"color","#e9e9e9"),M(o,"class","svelte-k014sn"),ie(a,"background-color","#fff"),ie(a,"color","#000"),M(a,"class","svelte-k014sn")},m(u,f){P(u,e,f),P(u,n,f),P(u,r,f),P(u,i,f),P(u,o,f),P(u,s,f),P(u,a,f),l||(c=[X(e,"click",t[1]),X(r,"click",t[2]),X(o,"click",t[3]),X(a,"click",t[4])],l=!0)},p:z,i:z,o:z,d(u){u&&(C(e),C(n),C(r),C(i),C(o),C(s),C(a)),l=!1,ve(c)}}}function qa(t){const e=s=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s)};return[e,()=>e("warm"),()=>e("black"),()=>e("dark"),()=>e("light")]}class Bs extends ue{constructor(e){super(),ce(this,e,qa,La,le,{})}}function Ua(t){let e,n,r,i,o,s,a,l,c,u,f,h,p,g,d,m,y,b,_,E,w,x,k,B;return w=new Bs({}),{c(){e=R("label"),e.textContent="Font:",n=F(),r=R("br"),i=F(),o=R("select"),s=R("option"),s.textContent="Default",a=R("option"),a.textContent="Verdana",l=R("option"),l.textContent="Arial",c=R("option"),c.textContent="Courier New ",u=R("option"),u.textContent="Helvetica",f=R("option"),f.textContent="Times New Roman",h=F(),p=R("br"),g=F(),d=R("label"),d.textContent="Scale:",m=F(),y=R("br"),b=F(),_=R("input"),E=F(),$(w.$$.fragment),M(e,"for","fontpicker"),s.__value="Default",De(s,s.__value),ie(a,"font-family","'Verdana'"),a.__value="Verdana",De(a,a.__value),ie(l,"font-family","'Arial'"),l.__value="Arial",De(l,l.__value),ie(c,"font-family","'Courier New '"),c.__value="Courier New ",De(c,c.__value),ie(u,"font-family","'Helvetica'"),u.__value="Helvetica",De(u,u.__value),ie(f,"font-family","'Times New Roman'"),f.__value="Times New Roman",De(f,f.__value),M(o,"name","fontpicker"),ie(o,"width","100%"),t[0].fontFamily===void 0&&be(()=>t[1].call(o)),M(d,"for","scale"),M(_,"name","scale"),M(_,"type","range"),M(_,"min","5"),M(_,"max","30")},m(v,T){P(v,e,T),P(v,n,T),P(v,r,T),P(v,i,T),P(v,o,T),S(o,s),S(o,a),S(o,l),S(o,c),S(o,u),S(o,f),Ur(o,t[0].fontFamily,!0),P(v,h,T),P(v,p,T),P(v,g,T),P(v,d,T),P(v,m,T),P(v,y,T),P(v,b,T),P(v,_,T),De(_,t[0].scale),P(v,E,T),Q(w,v,T),x=!0,k||(B=[X(o,"change",t[1]),X(_,"change",t[2]),X(_,"input",t[2])],k=!0)},p(v,[T]){T&1&&Ur(o,v[0].fontFamily),T&1&&De(_,v[0].scale)},i(v){x||(K(w.$$.fragment,v),x=!0)},o(v){N(w.$$.fragment,v),x=!1},d(v){v&&(C(e),C(n),C(r),C(i),C(o),C(h),C(p),C(g),C(d),C(m),C(y),C(b),C(_),C(E)),J(w,v),k=!1,ve(B)}}}function Ha(t,e,n){let{settings:r}=e;function i(){r.fontFamily=Us(this),n(0,r)}function o(){r.scale=Ls(this.value),n(0,r)}return t.$$set=s=>{"settings"in s&&n(0,r=s.settings)},[r,i,o]}class Va extends ue{constructor(e){super(),ce(this,e,Ha,Ua,le,{settings:0})}}const Ya=t=>({}),di=t=>({});function hi(t){let e,n,r,i,o,s;const a=t[4].default,l=Et(a,t,t[3],null);return{c(){e=R("div"),n=R("div"),l&&l.c(),M(n,"class","wrapper svelte-1xij5ih"),M(e,"class","popover svelte-1xij5ih")},m(c,u){P(c,e,u),S(e,n),l&&l.m(n,null),i=!0,o||(s=js(t[2].call(null,e)),o=!0)},p(c,u){l&&l.p&&(!i||u&8)&&St(l,a,c,c[3],i?At(a,c[3],u,null):Bt(c[3]),null)},i(c){i||(K(l,c),c&&be(()=>{i&&(r||(r=vn(e,li,{x:50,duration:200},!0)),r.run(1))}),i=!0)},o(c){N(l,c),c&&(r||(r=vn(e,li,{x:50,duration:200},!1)),r.run(0)),i=!1},d(c){c&&C(e),l&&l.d(c),c&&r&&r.end(),o=!1,s()}}}function Wa(t){let e,n,r,i,o,s;const a=t[4].icon,l=Et(a,t,t[3],di);let c=t[0]&&hi(t);return{c(){e=R("button"),l&&l.c(),n=F(),c&&c.c(),r=Ar(),M(e,"class","popoverBtn svelte-1xij5ih")},m(u,f){P(u,e,f),l&&l.m(e,null),t[5](e),P(u,n,f),c&&c.m(u,f),P(u,r,f),i=!0,o||(s=X(e,"click",t[6]),o=!0)},p(u,[f]){l&&l.p&&(!i||f&8)&&St(l,a,u,u[3],i?At(a,u[3],f,Ya):Bt(u[3]),di),u[0]?c?(c.p(u,f),f&1&&K(c,1)):(c=hi(u),c.c(),K(c,1),c.m(r.parentNode,r)):c&&(pt(),N(c,1,1,()=>{c=null}),gt())},i(u){i||(K(l,u),K(c),i=!0)},o(u){N(l,u),N(c),i=!1},d(u){u&&(C(e),C(n),C(r)),l&&l.d(u),t[5](null),c&&c.d(u),o=!1,s()}}}function Ga(t,e,n){let{$$slots:r={},$$scope:i}=e,o,s;function a(u){const f=h=>{h.target instanceof Element&&!u.contains(h.target)&&h.target!==s&&n(0,o=!1)};return document.addEventListener("click",f,!0),{destroy(){document.removeEventListener("click",f,!0)}}}function l(u){Ne[u?"unshift":"push"](()=>{s=u,n(1,s)})}const c=()=>n(0,o=!o);return t.$$set=u=>{"$$scope"in u&&n(3,i=u.$$scope)},[o,s,a,i,r,l,c]}class wr extends ue{constructor(e){super(),ce(this,e,Ga,Wa,le,{})}}function Za(t){let e,n=t[0].name+"",r,i,o,s=t[0].index+"",a,l,c,u;return{c(){e=R("button"),r=H(n),i=F(),o=R("span"),a=H(s),M(e,"class","tocButton svelte-t3fdsg"),M(e,"style",l=(t[2]?"border: 1px solid lightblue; font-weight: bold;":"")+" "+(t[0].isChild?"padding-left: 2em;":""))},m(f,h){P(f,e,h),S(e,r),S(e,i),S(e,o),S(o,a),c||(u=X(e,"click",function(){Xe(t[1])&&t[1].apply(this,arguments)}),c=!0)},p(f,[h]){t=f,h&1&&n!==(n=t[0].name+"")&&ne(r,n),h&1&&s!==(s=t[0].index+"")&&ne(a,s),h&5&&l!==(l=(t[2]?"border: 1px solid lightblue; font-weight: bold;":"")+" "+(t[0].isChild?"padding-left: 2em;":""))&&M(e,"style",l)},i:z,o:z,d(f){f&&C(e),c=!1,u()}}}function Qa(t,e,n){let{tocitem:r}=e,{onclick:i}=e,{selected:o}=e;return t.$$set=s=>{"tocitem"in s&&n(0,r=s.tocitem),"onclick"in s&&n(1,i=s.onclick),"selected"in s&&n(2,o=s.selected)},[r,i,o]}class Ja extends ue{constructor(e){super(),ce(this,e,Qa,Za,le,{tocitem:0,onclick:1,selected:2})}}const Xa=t=>{let e=document.getElementById("user-settings");e||(e=document.createElement("style"),e.id="user-settings",document.head.appendChild(e)),e.innerText="#container { transform: scale("+t.scale/10+"); width: "+50/(t.scale/10)+"%; } @media (max-width: 1500px) {#container { width: "+90/(t.scale/10)+"%}}"+(t.fontFamily!=="Default"?" #container p, #container a, #container span { font-family: "+t.fontFamily+" !important;}":""),localStorage.setItem("settings",JSON.stringify(t))},$a=t=>{for(const e of document.getElementsByClassName("essence-reader"))e.remove();t.forEach(e=>{const n=document.createElement("style");n.innerText=e,n.className="essence-reader",document.head.appendChild(n)})},el=(t,e)=>{t!==-1&&we.books.update(t,{progress:e})},mi=new DOMParser,pi=t=>decodeURI(t.split("\\").pop().split("/").pop()),tl=(t,e,n)=>{let r=mi.parseFromString(t,"application/xhtml+xml");r.querySelector("parsererror")&&(r=mi.parseFromString(t,"text/html"));for(const o of r.querySelectorAll("[src],[href], image"))switch(o.tagName){case"IMG":case"img":{const s=pi(o.getAttribute("src"));e.has(s)&&(o.setAttribute("src",URL.createObjectURL(e.get(s))),o.style.cssText+="max-height: 100%; max-width: 100%; object-fit: scale-down;");break}case"IMAGE":case"image":{const s=pi(o.getAttributeNS("http://www.w3.org/1999/xlink","href"));e.has(s)&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",URL.createObjectURL(e.get(s)));break}default:{if(o.getAttribute("href")!==null)if(o.getAttribute("href").includes("http"))o.setAttribute("target","_blank");else{let s=o.getAttribute("href").split("\\").pop().split("/").pop();o.addEventListener("click",a=>{a.preventDefault(),n(s)})}o.getAttribute("src")!==null&&!o.getAttribute("src").includes("http")&&o.removeAttribute("src");break}}return r.body};function gi(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function nl(t){let e,n,r,i=t[1]&&gi(t),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);return{c(){e=W("svg"),i&&i.c(),n=W("path"),r=W("path"),M(n,"d","M27,16.76c0-.25,0-.5,0-.76s0-.51,0-.77l1.92-1.68A2,2,0,0,0,29.3,11L26.94,7a2,2,0,0,0-1.73-1,2,2,0,0,0-.64.1l-2.43.82a11.35,11.35,0,0,0-1.31-.75l-.51-2.52a2,2,0,0,0-2-1.61H13.64a2,2,0,0,0-2,1.61l-.51,2.52a11.48,11.48,0,0,0-1.32.75L7.43,6.06A2,2,0,0,0,6.79,6,2,2,0,0,0,5.06,7L2.7,11a2,2,0,0,0,.41,2.51L5,15.24c0,.25,0,.5,0,.76s0,.51,0,.77L3.11,18.45A2,2,0,0,0,2.7,21L5.06,25a2,2,0,0,0,1.73,1,2,2,0,0,0,.64-.1l2.43-.82a11.35,11.35,0,0,0,1.31.75l.51,2.52a2,2,0,0,0,2,1.61h4.72a2,2,0,0,0,2-1.61l.51-2.52a11.48,11.48,0,0,0,1.32-.75l2.42.82a2,2,0,0,0,.64.1,2,2,0,0,0,1.73-1L29.3,21a2,2,0,0,0-.41-2.51ZM25.21,24l-3.43-1.16a8.86,8.86,0,0,1-2.71,1.57L18.36,28H13.64l-.71-3.55a9.36,9.36,0,0,1-2.7-1.57L6.79,24,4.43,20l2.72-2.4a8.9,8.9,0,0,1,0-3.13L4.43,12,6.79,8l3.43,1.16a8.86,8.86,0,0,1,2.71-1.57L13.64,4h4.72l.71,3.55a9.36,9.36,0,0,1,2.7,1.57L25.21,8,27.57,12l-2.72,2.4a8.9,8.9,0,0,1,0,3.13L27.57,20Z"),M(r,"d","M16,22a6,6,0,1,1,6-6A5.94,5.94,0,0,1,16,22Zm0-10a3.91,3.91,0,0,0-4,4,3.91,3.91,0,0,0,4,4,3.91,3.91,0,0,0,4-4A3.91,3.91,0,0,0,16,12Z"),ge(e,s)},m(a,l){P(a,e,l),i&&i.m(e,null),S(e,n),S(e,r)},p(a,[l]){a[1]?i?i.p(a,l):(i=gi(a),i.c(),i.m(e,n)):i&&(i.d(1),i=null),ge(e,s=$e(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:a[0]},l&1&&{height:a[0]},l&4&&a[2],l&8&&a[3]]))},i:z,o:z,d(a){a&&C(e),i&&i.d()}}}function rl(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class Os extends ue{constructor(e){super(),ce(this,e,rl,nl,le,{size:0,title:1})}}function yi(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function il(t){let e,n,r=t[1]&&yi(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let s=0;s<i.length;s+=1)o=Z(o,i[s]);return{c(){e=W("svg"),r&&r.c(),n=W("path"),M(n,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),ge(e,o)},m(s,a){P(s,e,a),r&&r.m(e,null),S(e,n)},p(s,[a]){s[1]?r?r.p(s,a):(r=yi(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),ge(e,o=$e(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:z,o:z,d(s){s&&C(e),r&&r.d()}}}function sl(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class ol extends ue{constructor(e){super(),ce(this,e,sl,il,le,{size:0,title:1})}}function bi(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function al(t){let e,n,r=t[1]&&bi(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let s=0;s<i.length;s+=1)o=Z(o,i[s]);return{c(){e=W("svg"),r&&r.c(),n=W("path"),M(n,"d","M18 6L16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6z"),ge(e,o)},m(s,a){P(s,e,a),r&&r.m(e,null),S(e,n)},p(s,[a]){s[1]?r?r.p(s,a):(r=bi(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),ge(e,o=$e(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:z,o:z,d(s){s&&C(e),r&&r.d()}}}function ll(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class cl extends ue{constructor(e){super(),ce(this,e,ll,al,le,{size:0,title:1})}}function _i(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function ul(t){let e,n,r=t[1]&&_i(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let s=0;s<i.length;s+=1)o=Z(o,i[s]);return{c(){e=W("svg"),r&&r.c(),n=W("path"),M(n,"d","M14 26L15.41 24.59 7.83 17 28 17 28 15 7.83 15 15.41 7.41 14 6 4 16 14 26z"),ge(e,o)},m(s,a){P(s,e,a),r&&r.m(e,null),S(e,n)},p(s,[a]){s[1]?r?r.p(s,a):(r=_i(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),ge(e,o=$e(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:z,o:z,d(s){s&&C(e),r&&r.d()}}}function fl(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class dl extends ue{constructor(e){super(),ce(this,e,fl,ul,le,{size:0,title:1})}}function vi(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function hl(t){let e,n,r=t[1]&&vi(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let s=0;s<i.length;s+=1)o=Z(o,i[s]);return{c(){e=W("svg"),r&&r.c(),n=W("path"),M(n,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),ge(e,o)},m(s,a){P(s,e,a),r&&r.m(e,null),S(e,n)},p(s,[a]){s[1]?r?r.p(s,a):(r=vi(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),ge(e,o=$e(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:z,o:z,d(s){s&&C(e),r&&r.d()}}}function ml(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class pl extends ue{constructor(e){super(),ce(this,e,ml,hl,le,{size:0,title:1})}}function wi(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function gl(t){let e,n,r,i=t[1]&&wi(t),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);return{c(){e=W("svg"),i&&i.c(),n=W("path"),r=W("path"),M(n,"d","M16 20H18V28H16z"),M(r,"d","M23,4a7.0078,7.0078,0,0,0-7,7v3h2V11a5,5,0,1,1,5,5H5.8281l4.586-4.5859L9,10,2,17l7,7,1.4141-1.4141L5.8281,18H23A7,7,0,0,0,23,4Z"),ge(e,s)},m(a,l){P(a,e,l),i&&i.m(e,null),S(e,n),S(e,r)},p(a,[l]){a[1]?i?i.p(a,l):(i=wi(a),i.c(),i.m(e,n)):i&&(i.d(1),i=null),ge(e,s=$e(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:a[0]},l&1&&{height:a[0]},l&4&&a[2],l&8&&a[3]]))},i:z,o:z,d(a){a&&C(e),i&&i.d()}}}function yl(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class bl extends ue{constructor(e){super(),ce(this,e,yl,gl,le,{size:0,title:1})}}const{document:ki}=Ks;function xi(t,e,n){const r=t.slice();return r[24]=e[n],r}function _l(t){let e,n,r,i,o;return n=new pl({props:{size:24}}),{c(){e=R("button"),$(n.$$.fragment),M(e,"slot","leftbar")},m(s,a){P(s,e,a),Q(n,e,null),r=!0,i||(o=X(e,"click",t[17]),i=!0)},p:z,i(s){r||(K(n.$$.fragment,s),r=!0)},o(s){N(n.$$.fragment,s),r=!1},d(s){s&&C(e),J(n),i=!1,o()}}}function vl(t){let e,n,r=t[0].meta.title+"",i,o,s,a=t[0].meta.author+"",l,c,u,f,h,p=t[0].spine.length-1+"",g;return{c(){e=R("h4"),n=R("b"),i=H(r),o=H(" -"),s=F(),l=H(a),c=F(),u=R("p"),f=H(t[3]),h=H("/"),g=H(p)},m(d,m){P(d,e,m),S(e,n),S(n,i),S(n,o),S(e,s),S(e,l),P(d,c,m),P(d,u,m),S(u,f),S(u,h),S(u,g)},p(d,m){m&1&&r!==(r=d[0].meta.title+"")&&ne(i,r),m&1&&a!==(a=d[0].meta.author+"")&&ne(l,a),m&8&&ne(f,d[3]),m&1&&p!==(p=d[0].spine.length-1+"")&&ne(g,p)},d(d){d&&(C(e),C(c),C(u))}}}function Ei(t){let e,n,r,i=t[5][t[5].length-1]+"",o,s,a,l,c;return n=new bl({}),{c(){e=R("button"),$(n.$$.fragment),r=F(),o=H(i),M(e,"id","jumpbtn"),M(e,"class","svelte-1si9v5y")},m(u,f){P(u,e,f),Q(n,e,null),S(e,r),S(e,o),a=!0,l||(c=X(e,"click",t[12]),l=!0)},p(u,f){(!a||f&32)&&i!==(i=u[5][u[5].length-1]+"")&&ne(o,i)},i(u){a||(K(n.$$.fragment,u),u&&be(()=>{a&&(s||(s=vn(e,mt,{duration:200},!0)),s.run(1))}),a=!0)},o(u){N(n.$$.fragment,u),u&&(s||(s=vn(e,mt,{duration:200},!1)),s.run(0)),a=!1},d(u){u&&C(e),J(n),u&&s&&s.end(),l=!1,c()}}}function Ai(t){let e,n;function r(){return t[13](t[24])}return e=new Ja({props:{tocitem:t[24],selected:t[3]===t[24].index,onclick:r}}),{c(){$(e.$$.fragment)},m(i,o){Q(e,i,o),n=!0},p(i,o){t=i;const s={};o&1&&(s.tocitem=t[24]),o&9&&(s.selected=t[3]===t[24].index),o&1&&(s.onclick=r),e.$set(s)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){J(e,i)}}}function wl(t){let e,n,r=wn(t[0].toc),i=[];for(let s=0;s<r.length;s+=1)i[s]=Ai(xi(t,r,s));const o=s=>N(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ar()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);P(s,e,a),n=!0},p(s,a){if(a&265){r=wn(s[0].toc);let l;for(l=0;l<r.length;l+=1){const c=xi(s,r,l);i[l]?(i[l].p(c,a),K(i[l],1)):(i[l]=Ai(c),i[l].c(),K(i[l],1),i[l].m(e.parentNode,e))}for(pt(),l=r.length;l<i.length;l+=1)o(l);gt()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)K(i[a]);n=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)N(i[a]);n=!1},d(s){s&&C(e),Fs(i,s)}}}function kl(t){let e,n;return e=new ol({props:{size:24,slot:"icon"}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),n=!0},p:z,i(r){n||(K(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function xl(t){let e,n,r;function i(s){t[14](s)}let o={};return t[1]!==void 0&&(o.settings=t[1]),e=new Va({props:o}),Ne.push(()=>kn(e,"settings",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};!n&&a&2&&(n=!0,l.settings=s[1],_n(()=>n=!1)),e.$set(l)},i(s){r||(K(e.$$.fragment,s),r=!0)},o(s){N(e.$$.fragment,s),r=!1},d(s){J(e,s)}}}function El(t){let e,n;return e=new Os({props:{size:24,slot:"icon"}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),n=!0},p:z,i(r){n||(K(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Al(t){let e,n,r,i,o,s,a,l,c,u,f,h,p,g=t[5].length!==0&&Ei(t);return n=new wr({props:{$$slots:{icon:[kl],default:[wl]},$$scope:{ctx:t}}}),i=new wr({props:{$$slots:{icon:[El],default:[xl]},$$scope:{ctx:t}}}),a=new dl({props:{size:24}}),u=new cl({props:{size:24}}),{c(){g&&g.c(),e=F(),$(n.$$.fragment),r=F(),$(i.$$.fragment),o=F(),s=R("button"),$(a.$$.fragment),l=F(),c=R("button"),$(u.$$.fragment)},m(d,m){g&&g.m(d,m),P(d,e,m),Q(n,d,m),P(d,r,m),Q(i,d,m),P(d,o,m),P(d,s,m),Q(a,s,null),P(d,l,m),P(d,c,m),Q(u,c,null),f=!0,h||(p=[X(s,"click",t[15]),X(c,"click",t[16])],h=!0)},p(d,m){d[5].length!==0?g?(g.p(d,m),m&32&&K(g,1)):(g=Ei(d),g.c(),K(g,1),g.m(e.parentNode,e)):g&&(pt(),N(g,1,1,()=>{g=null}),gt());const y={};m&134217737&&(y.$$scope={dirty:m,ctx:d}),n.$set(y);const b={};m&134217730&&(b.$$scope={dirty:m,ctx:d}),i.$set(b)},i(d){f||(K(g),K(n.$$.fragment,d),K(i.$$.fragment,d),K(a.$$.fragment,d),K(u.$$.fragment,d),f=!0)},o(d){N(g),N(n.$$.fragment,d),N(i.$$.fragment,d),N(a.$$.fragment,d),N(u.$$.fragment,d),f=!1},d(d){d&&(C(e),C(r),C(o),C(s),C(l),C(c)),g&&g.d(d),J(n,d),J(i,d),J(a),J(u),h=!1,ve(p)}}}function Sl(t){let e=!1,n=()=>{e=!1},r,i,o,s,a,l,c,u,f,h,p;return be(t[11]),ki.title=i=`
        `+(t[0].meta.title+" - "+t[0].meta.author)+`
    `,a=new Ss({props:{toned:t[4]>100,$$slots:{rightbar:[Al],toptext:[vl],leftbar:[_l]},$$scope:{ctx:t}}}),{c(){o=F(),s=R("div"),$(a.$$.fragment),l=F(),c=R("div"),M(c,"id","container"),M(c,"class","svelte-1si9v5y")},m(g,d){P(g,o,d),P(g,s,d),Q(a,s,null),S(s,l),S(s,c),t[18](c),f=!0,h||(p=[X(window,"keydown",t[9]),X(window,"scroll",()=>{e=!0,clearTimeout(r),r=setTimeout(n,100),t[11]()})],h=!0)},p(g,[d]){d&16&&!e&&(e=!0,clearTimeout(r),scrollTo(window.pageXOffset,g[4]),r=setTimeout(n,100)),(!f||d&1)&&i!==(i=`
        `+(g[0].meta.title+" - "+g[0].meta.author)+`
    `)&&(ki.title=i);const m={};d&16&&(m.toned=g[4]>100),d&134217771&&(m.$$scope={dirty:d,ctx:g}),a.$set(m)},i(g){f||(K(a.$$.fragment,g),g&&(u||be(()=>{u=Rn(s,mt,{duration:200}),u.start()})),f=!0)},o(g){N(a.$$.fragment,g),f=!1},d(g){g&&(C(o),C(s)),J(a),t[18](null),h=!1,ve(p)}}}function Bl(t,e,n){let{currentBook:r}=e,{currentId:i}=e,o,s=0,a=0,l=r.meta.title,c=JSON.parse(localStorage.getItem("settings"))||{scale:10,fontFamily:"Default"};const u=()=>{isNaN(r.progress)?h(0):h(Math.floor(r.progress)),$a(r.files.styles)},f=()=>{l!==r.meta.title&&(l=r.meta.title,u())};Sr(u);const h=A=>{0<=A&&A<r.spine.length&&(n(3,s=A),n(4,a=0),n(0,r.progress=s,r),el(i,s),g())},p=async A=>{let[L,G]=A.split("#");if(L&&y(r.contents.get(L).index),G){await Xs();const q=document.getElementById(G);q.style.fontSize="100px",q.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),q.style.transition="font 1s ease",q.style.fontSize=""}},g=()=>{const A=r.contents.get(r.spine[s]).html,L=r.files.images;o.replaceChildren(tl(A,L,p))};let d=[];const m=A=>{h(s+A),d.length!==0&&n(5,d=[])},y=A=>{n(5,d=[...d,s]),h(A)},b=({key:A})=>{switch(A){case"ArrowLeft":m(-1);break;case"ArrowRight":m(1);break}};function _(){n(4,a=window.pageYOffset)}const E=()=>{h(d.pop()),n(5,d)},w=A=>y(A.index);function x(A){c=A,n(1,c)}const k=()=>m(-1),B=()=>m(1),v=()=>location.hash="";function T(A){Ne[A?"unshift":"push"](()=>{o=A,n(2,o)})}return t.$$set=A=>{"currentBook"in A&&n(0,r=A.currentBook),"currentId"in A&&n(10,i=A.currentId)},t.$$.update=()=>{t.$$.dirty&2&&Xa(c),t.$$.dirty&1&&f()},[r,c,o,s,a,d,h,m,y,b,i,_,E,w,x,k,B,v,T]}class Ol extends ue{constructor(e){super(),ce(this,e,Bl,Sl,le,{currentBook:0,currentId:10})}}function Cl(t,{from:e,to:n},r={}){const i=getComputedStyle(t),o=i.transform==="none"?"":i.transform,[s,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*s/n.width-(n.left+s),c=e.top+e.height*a/n.height-(n.top+a),{delay:u=0,duration:f=p=>Math.sqrt(p)*120,easing:h=As}=r;return{delay:u,duration:Xe(f)?f(Math.sqrt(l*l+c*c)):f,easing:h,css:(p,g)=>{const d=g*l,m=g*c,y=p+g*e.width/n.width,b=p+g*e.height/n.height;return`transform: ${o} translate(${d}px, ${m}px) scale(${y}, ${b});`}}}function Si(t){let e,n;return{c(){e=W("title"),n=H(t[1])},m(r,i){P(r,e,i),S(e,n)},p(r,i){i&2&&ne(n,r[1])},d(r){r&&C(e)}}}function Pl(t){let e,n,r,i=t[1]&&Si(t),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);return{c(){e=W("svg"),i&&i.c(),n=W("path"),r=W("path"),M(n,"d","M12 12H14V24H12zM18 12H20V24H18z"),M(r,"d","M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"),ge(e,s)},m(a,l){P(a,e,l),i&&i.m(e,null),S(e,n),S(e,r)},p(a,[l]){a[1]?i?i.p(a,l):(i=Si(a),i.c(),i.m(e,n)):i&&(i.d(1),i=null),ge(e,s=$e(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:a[0]},l&1&&{height:a[0]},l&4&&a[2],l&8&&a[3]]))},i:z,o:z,d(a){a&&C(e),i&&i.d()}}}function Ml(t,e,n){let r,i;const o=["size","title"];let s=pe(e,o),{size:a=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Z(Z({},e),me(c))),n(3,s=pe(e,o)),"size"in c&&n(0,a=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=me(e),[a,l,i,s,r]}class Rl extends ue{constructor(e){super(),ce(this,e,Ml,Pl,le,{size:0,title:1})}}function Tl(t){let e,n,r,i,o,s,a,l,c,u=t[0].meta.author+"",f,h,p,g=t[0].meta.title+"",d,m,y,b=t[0].progress+"",_,E,w=t[0].spine.length-1+"",x,k,B,v,T;return r=new Rl({props:{size:20}}),{c(){e=R("div"),n=R("button"),$(r.$$.fragment),i=F(),o=R("img"),a=F(),l=R("div"),c=R("h4"),f=H(u),h=F(),p=R("h3"),d=H(g),m=F(),y=R("p"),_=H(b),E=H(" / "),x=H(w),M(n,"class","deleteBtn svelte-11pcptl"),Lr(o.src,s=t[0].meta.cover!==void 0?URL.createObjectURL(t[0].meta.cover):"")||M(o,"src",s),M(o,"alt","cover"),M(o,"class","svelte-11pcptl"),M(p,"class","svelte-11pcptl"),M(l,"class","bookInfo svelte-11pcptl"),M(e,"class","book svelte-11pcptl")},m(A,L){P(A,e,L),S(e,n),Q(r,n,null),S(e,i),S(e,o),S(e,a),S(e,l),S(l,c),S(c,f),S(l,h),S(l,p),S(p,d),S(l,m),S(l,y),S(y,_),S(y,E),S(y,x),B=!0,v||(T=X(n,"click",t[2]),v=!0)},p(A,[L]){(!B||L&1&&!Lr(o.src,s=A[0].meta.cover!==void 0?URL.createObjectURL(A[0].meta.cover):""))&&M(o,"src",s),(!B||L&1)&&u!==(u=A[0].meta.author+"")&&ne(f,u),(!B||L&1)&&g!==(g=A[0].meta.title+"")&&ne(d,g),(!B||L&1)&&b!==(b=A[0].progress+"")&&ne(_,b),(!B||L&1)&&w!==(w=A[0].spine.length-1+"")&&ne(x,w)},i(A){B||(K(r.$$.fragment,A),A&&(k||be(()=>{k=Rn(e,mt,{duration:200}),k.start()})),B=!0)},o(A){N(r.$$.fragment,A),B=!1},d(A){A&&C(e),J(r),v=!1,T()}}}function Il(t,e,n){let{book:r}=e,{deleteBook:i}=e;const o=s=>{s.stopPropagation(),i(r.id)};return t.$$set=s=>{"book"in s&&n(0,r=s.book),"deleteBook"in s&&n(1,i=s.deleteBook)},[r,i,o]}class Dl extends ue{constructor(e){super(),ce(this,e,Il,Tl,le,{book:0,deleteBook:1})}}function Bi(t,e,n){const r=t.slice();return r[14]=e[n],r}function jl(t){let e;return{c(){e=R("h3"),e.textContent="Essence Reader",M(e,"slot","toptext")},m(n,r){P(n,e,r)},p:z,d(n){n&&C(e)}}}function Kl(t){let e,n,r,i,o,s,a,l,c,u,f,h,p;return u=new Bs({}),{c(){e=R("div"),n=R("label"),r=R("input"),i=H(`
                    Save books`),o=F(),s=R("button"),s.textContent="Remove all",a=F(),l=R("hr"),c=H(`
                Select theme
                `),$(u.$$.fragment),M(r,"type","checkbox"),ie(e,"width","8em")},m(g,d){P(g,e,d),S(e,n),S(n,r),r.checked=t[0],S(n,i),S(e,o),S(e,s),S(e,a),S(e,l),S(e,c),Q(u,e,null),f=!0,h||(p=[X(r,"change",t[9]),X(s,"click",t[7])],h=!0)},p(g,d){d&1&&(r.checked=g[0])},i(g){f||(K(u.$$.fragment,g),f=!0)},o(g){N(u.$$.fragment,g),f=!1},d(g){g&&C(e),J(u),h=!1,ve(p)}}}function zl(t){let e,n;return e=new Os({props:{slot:"icon",size:24}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),n=!0},p:z,i(r){n||(K(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Nl(t){let e,n;return e=new wr({props:{slot:"rightbar",$$slots:{icon:[zl],default:[Kl]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(r,i){Q(e,r,i),n=!0},p(r,i){const o={};i&131073&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(K(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Oi(t){let e=[],n=new Map,r,i,o=wn(t[3]);const s=a=>a[14].id;for(let a=0;a<o.length;a+=1){let l=Bi(t,o,a),c=s(l);n.set(c,e[a]=Ci(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ar()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);P(a,r,l),i=!0},p(a,l){if(l&74){o=wn(a[3]),pt();for(let c=0;c<e.length;c+=1)e[c].r();e=ro(e,l,s,1,a,o,n,r.parentNode,no,Ci,r,Bi);for(let c=0;c<e.length;c+=1)e[c].a();gt()}},i(a){if(!i){for(let l=0;l<o.length;l+=1)K(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)N(e[l]);i=!1},d(a){a&&C(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Ci(t,e){let n,r,i,o,s=z,a,l,c;r=new Dl({props:{book:e[14],deleteBook:e[6]}});function u(){return e[10](e[14])}return{key:t,first:null,c(){n=R("button"),$(r.$$.fragment),i=F(),M(n,"class","libraryItem svelte-ymrdf8"),this.first=n},m(f,h){P(f,n,h),Q(r,n,null),S(n,i),a=!0,l||(c=X(n,"click",u),l=!0)},p(f,h){e=f;const p={};h&8&&(p.book=e[14]),r.$set(p)},r(){o=n.getBoundingClientRect()},f(){Zs(n),s()},a(){s(),s=Gs(n,o,Cl,{duration:200})},i(f){a||(K(r.$$.fragment,f),a=!0)},o(f){N(r.$$.fragment,f),a=!1},d(f){f&&C(n),J(r),l=!1,c()}}}function Fl(t){let e,n,r,i,o,s,a,l=t[2]?"":"",c,u,f,h,p,g,d;n=new Ss({props:{$$slots:{rightbar:[Nl],toptext:[jl]},$$scope:{ctx:t}}});let m=t[3]&&Oi(t);return{c(){e=R("div"),$(n.$$.fragment),r=F(),i=R("div"),m&&m.c(),o=F(),s=R("button"),a=R("h1"),c=H(l),u=F(),f=R("h2"),f.textContent="Drop anywhere or click to select a file",M(a,"id","dropInfoIcon"),M(a,"class","svelte-ymrdf8"),M(s,"class","libraryItem svelte-ymrdf8"),ie(s,"color",t[2]?"green":"gray"),M(i,"id","parent"),M(i,"class","svelte-ymrdf8")},m(y,b){P(y,e,b),Q(n,e,null),S(e,r),S(e,i),m&&m.m(i,null),S(i,o),S(i,s),S(s,a),S(a,c),S(s,u),S(s,f),p=!0,g||(d=X(s,"click",t[11]),g=!0)},p(y,[b]){const _={};b&131073&&(_.$$scope={dirty:b,ctx:y}),n.$set(_),y[3]?m?(m.p(y,b),b&8&&K(m,1)):(m=Oi(y),m.c(),K(m,1),m.m(i,o)):m&&(pt(),N(m,1,1,()=>{m=null}),gt()),(!p||b&4)&&l!==(l=y[2]?"":"")&&ne(c,l),(!p||b&4)&&ie(s,"color",y[2]?"green":"gray")},i(y){p||(K(n.$$.fragment,y),K(m),y&&(h||be(()=>{h=Rn(e,mt,{duration:200}),h.start()})),p=!0)},o(y){N(n.$$.fragment,y),N(m),p=!1},d(y){y&&C(e),J(n),m&&m.d(),g=!1,d()}}}function Ll(t,e,n){let r,{readFiles:i=m=>{}}=e,{openExisting:o=m=>{}}=e,{dragging:s}=e,{saveBooksOn:a}=e,l=ys(()=>we.books.toArray().catch(()=>(n(0,a=!1),null)));Ds(t,l,m=>n(3,r=m));const c=()=>{let m=document.createElement("input");m.type="file",m.onchange=y=>{i(y.target.files[0])},m.click()};async function u(m){await we.books.delete(m)}const f=async()=>{confirm("Are you sure you want to remove all saved books?")&&await we.books.clear()};async function h(){a&&await we.books.count()}Sr(()=>{h(),window.addEventListener("unhandledrejection",m=>{m.reason instanceof TypeError&&(we.books.clear(),console.log("An error was encountered and book database has been cleared"))})});function p(){a=this.checked,n(0,a)}const g=m=>o(m.id),d=()=>c();return t.$$set=m=>{"readFiles"in m&&n(8,i=m.readFiles),"openExisting"in m&&n(1,o=m.openExisting),"dragging"in m&&n(2,s=m.dragging),"saveBooksOn"in m&&n(0,a=m.saveBooksOn)},[a,o,s,r,l,c,u,f,i,p,g,d]}class ql extends ue{constructor(e){super(),ce(this,e,Ll,Fl,le,{readFiles:8,openExisting:1,dragging:2,saveBooksOn:0})}}function Ul(t){let e,n,r;function i(s){t[10](s)}let o={readFiles:t[6],openExisting:t[7],dragging:t[3]};return t[0]!==void 0&&(o.saveBooksOn=t[0]),e=new ql({props:o}),Ne.push(()=>kn(e,"saveBooksOn",i)),{c(){$(e.$$.fragment)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};a&8&&(l.dragging=s[3]),!n&&a&1&&(n=!0,l.saveBooksOn=s[0],_n(()=>n=!1)),e.$set(l)},i(s){r||(K(e.$$.fragment,s),r=!0)},o(s){N(e.$$.fragment,s),r=!1},d(s){J(e,s)}}}function Hl(t){let e,n;return{c(){e=R("p"),e.textContent="Loading",ie(e,"text-align","center")},m(r,i){P(r,e,i)},p:z,i(r){r&&(n||be(()=>{n=Rn(e,mt,{}),n.start()}))},o:z,d(r){r&&C(e)}}}function Vl(t){let e,n,r,i;function o(l){t[8](l)}function s(l){t[9](l)}let a={};return t[1]!==void 0&&(a.currentBook=t[1]),t[5]!==void 0&&(a.currentId=t[5]),e=new Ol({props:a}),Ne.push(()=>kn(e,"currentBook",o)),Ne.push(()=>kn(e,"currentId",s)),{c(){$(e.$$.fragment)},m(l,c){Q(e,l,c),i=!0},p(l,c){const u={};!n&&c&2&&(n=!0,u.currentBook=l[1],_n(()=>n=!1)),!r&&c&32&&(r=!0,u.currentId=l[5],_n(()=>r=!1)),e.$set(u)},i(l){i||(K(e.$$.fragment,l),i=!0)},o(l){N(e.$$.fragment,l),i=!1},d(l){J(e,l)}}}function Yl(t){let e,n,r,i;const o=[Vl,Hl,Ul],s=[];function a(l,c){return l[2]?0:l[4]?1:2}return n=a(t),r=s[n]=o[n](t),{c(){e=R("main"),r.c()},m(l,c){P(l,e,c),s[n].m(e,null),i=!0},p(l,[c]){let u=n;n=a(l),n===u?s[n].p(l,c):(pt(),N(s[u],1,1,()=>{s[u]=null}),gt(),r=s[n],r?r.p(l,c):(r=s[n]=o[n](l),r.c()),K(r,1),r.m(e,null))},i(l){i||(K(r),i=!0)},o(l){N(r),i=!1},d(l){l&&C(e),s[n].d()}}}function Wl(t,e,n){let r=null,i=!1,o=!1,s=!1;const a=async d=>{try{n(4,s=!0);const m=await Ta(d);if(l&&d.size<3e7){const y=await Xo(m);c(m,y)}else c(m)}catch(m){alert(m)}n(4,s=!1)};let l=null;localStorage.getItem("saveBooksOn")!==null?l=JSON.parse(localStorage.getItem("saveBooksOn")):l=!0,window.addEventListener("dragenter",d=>{d.dataTransfer.types.includes("Files")&&n(3,o=!0)}),window.addEventListener("dragleave",d=>{n(3,o=!1),d.preventDefault()});const c=(d,m)=>{n(1,r=Da(d)),n(2,i=!0),location.hash=m?m.toString():"-1",n(5,f=m||-1)},u=d=>{d===f?(n(2,i=!0),location.hash=d.toString()):(n(4,s=!0),we.transaction("r",we.books,async()=>{let m=await we.books.get(d);m?c(m,m.id):location.hash="",n(4,s=!1)}).catch(()=>{n(4,s=!1),location.hash=""}))};Sr(()=>{location.hash!==""&&u(parseInt(location.hash.substring(1)))}),window.onhashchange=()=>{location.hash===""?(document.title="Essence Reader",n(2,i=!1),history.replaceState(null,""," ")):u(parseInt(location.hash.substring(1)))},window.addEventListener("dragover",d=>d.preventDefault()),window.addEventListener("drop",d=>{d.preventDefault(),n(3,o=!1),a(d.dataTransfer.files[0])});let f=null;function h(d){r=d,n(1,r)}function p(d){f=d,n(5,f)}function g(d){l=d,n(0,l)}return t.$$.update=()=>{t.$$.dirty&1&&localStorage.setItem("saveBooksOn",JSON.stringify(l))},[l,r,i,o,s,f,a,u,h,p,g]}class Gl extends ue{constructor(e){super(),ce(this,e,Wl,Yl,le,{})}}new Gl({target:document.getElementById("app")})});export default Zl();
